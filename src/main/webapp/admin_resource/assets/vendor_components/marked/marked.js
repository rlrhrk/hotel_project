(function(){var a={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};a.bullet=/(?:[*+-]|\d+\.)/;a.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;a.item=k(a.item,"gm")(/bull/g,a.bullet)();a.list=k(a.list)(/bull/g,a.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+a.def.source+")")();a.blockquote=k(a.blockquote)("def",a.def)();a._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";a.html=k(a.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,a._tag)();a.paragraph=k(a.paragraph)("hr",a.hr)("heading",a.heading)("lheading",a.lheading)("blockquote",a.blockquote)("tag","<"+a._tag)("def",a.def)();a.normal=g({},a);a.gfm=g({},a.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});a.gfm.paragraph=k(a.paragraph)("(?!","(?!"+a.gfm.fences.source.replace("\\1","\\2")+"|"+a.list.source.replace("\\1","\\3")+"|")();a.tables=g({},a.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function e(m){this.tokens=[];this.tokens.links={};this.options=m||f.defaults;this.rules=a.normal;if(this.options.gfm){if(this.options.tables){this.rules=a.tables}else{this.rules=a.gfm}}}e.rules=a;e.lex=function(o,n){var m=new e(n);return m.lex(o)};e.prototype.lex=function(m){m=m.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(m,true)};e.prototype.token=function(w,x,n){var w=w.replace(/^ +$/gm,""),u,t,p,o,m,r,v,q,s;while(w){if(p=this.rules.newline.exec(w)){w=w.substring(p[0].length);if(p[0].length>1){this.tokens.push({type:"space"})}}if(p=this.rules.code.exec(w)){w=w.substring(p[0].length);p=p[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?p.replace(/\n+$/,""):p});continue}if(p=this.rules.fences.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"code",lang:p[2],text:p[3]||""});continue}if(p=this.rules.heading.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"heading",depth:p[1].length,text:p[2]});continue}if(x&&(p=this.rules.nptable.exec(w))){w=w.substring(p[0].length);r={type:"table",header:p[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:p[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:p[3].replace(/\n$/,"").split("\n")};for(q=0;q<r.align.length;q++){if(/^ *-+: *$/.test(r.align[q])){r.align[q]="right"}else{if(/^ *:-+: *$/.test(r.align[q])){r.align[q]="center"}else{if(/^ *:-+ *$/.test(r.align[q])){r.align[q]="left"}else{r.align[q]=null}}}}for(q=0;q<r.cells.length;q++){r.cells[q]=r.cells[q].split(/ *\| */)}this.tokens.push(r);continue}if(p=this.rules.lheading.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"heading",depth:p[2]==="="?1:2,text:p[1]});continue}if(p=this.rules.hr.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"hr"});continue}if(p=this.rules.blockquote.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"blockquote_start"});p=p[0].replace(/^ *> ?/gm,"");this.token(p,x,true);this.tokens.push({type:"blockquote_end"});continue}if(p=this.rules.list.exec(w)){w=w.substring(p[0].length);o=p[2];this.tokens.push({type:"list_start",ordered:o.length>1});p=p[0].match(this.rules.item);u=false;s=p.length;q=0;for(;q<s;q++){r=p[q];v=r.length;r=r.replace(/^ *([*+-]|\d+\.) +/,"");if(~r.indexOf("\n ")){v-=r.length;r=!this.options.pedantic?r.replace(new RegExp("^ {1,"+v+"}","gm"),""):r.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&q!==s-1){m=a.bullet.exec(p[q+1])[0];if(o!==m&&!(o.length>1&&m.length>1)){w=p.slice(q+1).join("\n")+w;q=s-1}}t=u||/\n\n(?!\s*$)/.test(r);if(q!==s-1){u=r.charAt(r.length-1)==="\n";if(!t){t=u}}this.tokens.push({type:t?"loose_item_start":"list_item_start"});this.token(r,false,n);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(p=this.rules.html.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(p[1]==="pre"||p[1]==="script"||p[1]==="style"),text:p[0]});continue}if((!n&&x)&&(p=this.rules.def.exec(w))){w=w.substring(p[0].length);this.tokens.links[p[1].toLowerCase()]={href:p[2],title:p[3]};continue}if(x&&(p=this.rules.table.exec(w))){w=w.substring(p[0].length);r={type:"table",header:p[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:p[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:p[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(q=0;q<r.align.length;q++){if(/^ *-+: *$/.test(r.align[q])){r.align[q]="right"}else{if(/^ *:-+: *$/.test(r.align[q])){r.align[q]="center"}else{if(/^ *:-+ *$/.test(r.align[q])){r.align[q]="left"}else{r.align[q]=null}}}}for(q=0;q<r.cells.length;q++){r.cells[q]=r.cells[q].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(r);continue}if(x&&(p=this.rules.paragraph.exec(w))){w=w.substring(p[0].length);this.tokens.push({type:"paragraph",text:p[1].charAt(p[1].length-1)==="\n"?p[1].slice(0,-1):p[1]});continue}if(p=this.rules.text.exec(w)){w=w.substring(p[0].length);this.tokens.push({type:"text",text:p[0]});continue}if(w){throw new Error("Infinite loop on byte: "+w.charCodeAt(0))}}return this.tokens};var c={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};c._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;c._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;c.link=k(c.link)("inside",c._inside)("href",c._href)();c.reflink=k(c.reflink)("inside",c._inside)();c.normal=g({},c);c.pedantic=g({},c.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});c.gfm=g({},c.normal,{escape:k(c.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:k(c.text)("]|","~]|")("|","|https?://|")()});c.breaks=g({},c.gfm,{br:k(c.br)("{2,}","*")(),text:k(c.gfm.text)("{2,}","*")()});function d(m,n){this.options=n||f.defaults;this.links=m;this.rules=c.normal;this.renderer=this.options.renderer||new j;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=c.breaks}else{this.rules=c.gfm}}else{if(this.options.pedantic){this.rules=c.pedantic}}}d.rules=c;d.output=function(p,n,o){var m=new d(n,o);return m.output(p)};d.prototype.output=function(q){var p="",o,r,n,m;while(q){if(m=this.rules.escape.exec(q)){q=q.substring(m[0].length);p+=m[1];continue}if(m=this.rules.autolink.exec(q)){q=q.substring(m[0].length);if(m[2]==="@"){r=m[1].charAt(6)===":"?this.mangle(m[1].substring(7)):this.mangle(m[1]);n=this.mangle("mailto:")+r}else{r=b(m[1]);n=r}p+=this.renderer.link(n,null,r);continue}if(!this.inLink&&(m=this.rules.url.exec(q))){q=q.substring(m[0].length);r=b(m[1]);n=r;p+=this.renderer.link(n,null,r);continue}if(m=this.rules.tag.exec(q)){if(!this.inLink&&/^<a /i.test(m[0])){this.inLink=true}else{if(this.inLink&&/^<\/a>/i.test(m[0])){this.inLink=false}}q=q.substring(m[0].length);p+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(m[0]):b(m[0]):m[0];continue}if(m=this.rules.link.exec(q)){q=q.substring(m[0].length);this.inLink=true;p+=this.outputLink(m,{href:m[2],title:m[3]});this.inLink=false;continue}if((m=this.rules.reflink.exec(q))||(m=this.rules.nolink.exec(q))){q=q.substring(m[0].length);o=(m[2]||m[1]).replace(/\s+/g," ");o=this.links[o.toLowerCase()];if(!o||!o.href){p+=m[0].charAt(0);q=m[0].substring(1)+q;continue}this.inLink=true;p+=this.outputLink(m,o);this.inLink=false;continue}if(m=this.rules.strong.exec(q)){q=q.substring(m[0].length);p+=this.renderer.strong(this.output(m[2]||m[1]));continue}if(m=this.rules.em.exec(q)){q=q.substring(m[0].length);p+=this.renderer.em(this.output(m[2]||m[1]));continue}if(m=this.rules.code.exec(q)){q=q.substring(m[0].length);p+=this.renderer.codespan(b(m[2],true));continue}if(m=this.rules.br.exec(q)){q=q.substring(m[0].length);p+=this.renderer.br();continue}if(m=this.rules.del.exec(q)){q=q.substring(m[0].length);p+=this.renderer.del(this.output(m[1]));continue}if(m=this.rules.text.exec(q)){q=q.substring(m[0].length);p+=this.renderer.text(b(this.smartypants(m[0])));continue}if(q){throw new Error("Infinite loop on byte: "+q.charCodeAt(0))}}return p};d.prototype.outputLink=function(m,o){var n=b(o.href),p=o.title?b(o.title):null;return m[0].charAt(0)!=="!"?this.renderer.link(n,p,this.output(m[1])):this.renderer.image(n,p,b(m[1]))};d.prototype.smartypants=function(m){if(!this.options.smartypants){return m}return m.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")};d.prototype.mangle=function(q){if(!this.options.mangle){return q}var p="",o=q.length,n=0,m;for(;n<o;n++){m=q.charCodeAt(n);if(Math.random()>0.5){m="x"+m.toString(16)}p+="&#"+m+";"}return p};function j(m){this.options=m||{}}j.prototype.code=function(m,o,n){if(this.options.highlight){var p=this.options.highlight(m,o);if(p!=null&&p!==m){n=true;m=p}}if(!o){return"<pre><code>"+(n?m:b(m,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+b(o,true)+'">'+(n?m:b(m,true))+"\n</code></pre>\n"};j.prototype.blockquote=function(m){return"<blockquote>\n"+m+"</blockquote>\n"};j.prototype.html=function(m){return m};j.prototype.heading=function(o,m,n){return"<h"+m+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+o+"</h"+m+">\n"};j.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};j.prototype.list=function(m,n){var o=n?"ol":"ul";return"<"+o+">\n"+m+"</"+o+">\n"};j.prototype.listitem=function(m){return"<li>"+m+"</li>\n"};j.prototype.paragraph=function(m){return"<p>"+m+"</p>\n"};j.prototype.table=function(n,m){return"<table>\n<thead>\n"+n+"</thead>\n<tbody>\n"+m+"</tbody>\n</table>\n"};j.prototype.tablerow=function(m){return"<tr>\n"+m+"</tr>\n"};j.prototype.tablecell=function(m,n){var p=n.header?"th":"td";var o=n.align?"<"+p+' style="text-align:'+n.align+'">':"<"+p+">";return o+m+"</"+p+">\n"};j.prototype.strong=function(m){return"<strong>"+m+"</strong>"};j.prototype.em=function(m){return"<em>"+m+"</em>"};j.prototype.codespan=function(m){return"<code>"+m+"</code>"};j.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};j.prototype.del=function(m){return"<del>"+m+"</del>"};j.prototype.link=function(n,r,q){if(this.options.sanitize){try{var p=decodeURIComponent(l(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(m){return""}if(p.indexOf("javascript:")===0||p.indexOf("vbscript:")===0){return""}}var o='<a href="'+n+'"';if(r){o+=' title="'+r+'"'}o+=">"+q+"</a>";return o};j.prototype.image=function(m,p,o){var n='<img src="'+m+'" alt="'+o+'"';if(p){n+=' title="'+p+'"'}n+=this.options.xhtml?"/>":">";return n};j.prototype.text=function(m){return m};function i(m){this.tokens=[];this.token=null;this.options=m||f.defaults;this.options.renderer=this.options.renderer||new j;this.renderer=this.options.renderer;this.renderer.options=this.options}i.parse=function(p,m,o){var n=new i(m,o);return n.parse(p)};i.prototype.parse=function(n){this.inline=new d(n.links,this.options,this.renderer);this.tokens=n.reverse();var m="";while(this.next()){m+=this.tok()}return m};i.prototype.next=function(){return this.token=this.tokens.pop()};i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};i.prototype.parseText=function(){var m=this.token.text;while(this.peek().type==="text"){m+="\n"+this.next().text}return this.inline.output(m)};i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var p="",m="",r,u,n,o,s;n="";for(r=0;r<this.token.header.length;r++){o={header:true,align:this.token.align[r]};n+=this.renderer.tablecell(this.inline.output(this.token.header[r]),{header:true,align:this.token.align[r]})}p+=this.renderer.tablerow(n);for(r=0;r<this.token.cells.length;r++){u=this.token.cells[r];n="";for(s=0;s<u.length;s++){n+=this.renderer.tablecell(this.inline.output(u[s]),{header:false,align:this.token.align[s]})}m+=this.renderer.tablerow(n)}return this.renderer.table(p,m);case"blockquote_start":var m="";while(this.next().type!=="blockquote_end"){m+=this.tok()}return this.renderer.blockquote(m);case"list_start":var m="",t=this.token.ordered;while(this.next().type!=="list_end"){m+=this.tok()}return this.renderer.list(m,t);case"list_item_start":var m="";while(this.next().type!=="list_item_end"){m+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(m);case"loose_item_start":var m="";while(this.next().type!=="list_item_end"){m+=this.tok()}return this.renderer.listitem(m);case"html":var q=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(q);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};function b(n,m){return n.replace(!m?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(m){return m.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(o,p){p=p.toLowerCase();if(p==="colon"){return":"}if(p.charAt(0)==="#"){return p.charAt(1)==="x"?String.fromCharCode(parseInt(p.substring(2),16)):String.fromCharCode(+p.substring(1))}return""})}function k(n,m){n=n.source;m=m||"";return function o(p,q){if(!p){return new RegExp(n,m)}q=q.source||q;q=q.replace(/(^|[^\[])\^/g,"$1");n=n.replace(p,q);return o}}function h(){}h.exec=h;function g(o){var m=1,p,n;for(;m<arguments.length;m++){p=arguments[m];for(n in p){if(Object.prototype.hasOwnProperty.call(p,n)){o[n]=p[n]}}}return o}function f(t,r,m){if(m||typeof r==="function"){if(!m){m=r;r=null}r=g({},f.defaults,r||{});var p=r.highlight,u,s,q=0;try{u=e.lex(t,r)}catch(o){return m(o)}s=u.length;var n=function(w){if(w){r.highlight=p;return m(w)}var x;try{x=i.parse(u,r)}catch(v){w=v}r.highlight=p;return w?m(w):m(null,x)};if(!p||p.length<3){return n()}delete r.highlight;if(!s){return n()}for(;q<u.length;q++){(function(v){if(v.type!=="code"){return --s||n()}return p(v.text,v.lang,function(x,w){if(x){return n(x)}if(w==null||w===v.text){return --s||n()}v.text=w;v.escaped=true;--s||n()})})(u[q])}return}try{if(r){r=g({},f.defaults,r)}return i.parse(e.lex(t,r),r)}catch(o){o.message+="\nPlease report this to https://github.com/chjj/marked.";if((r||f.defaults).silent){return"<p>An error occured:</p><pre>"+b(o.message+"",true)+"</pre>"}throw o}}f.options=f.setOptions=function(m){g(f.defaults,m);return f};f.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,sanitizer:null,mangle:true,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new j,xhtml:false};f.Parser=i;f.parser=i.parse;f.Renderer=j;f.Lexer=e;f.lexer=e.lex;f.InlineLexer=d;f.inlineLexer=d.output;f.parse=f;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=f}else{if(typeof define==="function"&&define.amd){define(function(){return f})}else{this.marked=f}}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());