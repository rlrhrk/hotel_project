$.fn.editableTableWidget=function(a){return $(this).each(function(){var h=function(){var q=$.extend({},$.fn.editableTableWidget.defaultOptions);q.editor=q.editor.clone();return q},c=$.extend(h(),a),e=37,g=38,f=39,d=40,k=13,l=27,p=9,j=$(this),i=c.editor.css("position","absolute").hide().appendTo(j.parent()),b,o=function(q){b=j.find("td:focus");if(b.length){i.val(b.text()).removeClass("error").show().offset(b.offset()).css(b.css(c.cloneProperties)).width(b.width()).height(b.height()).focus();if(q){i.select()}}},n=function(){var s=i.val(),q=$.Event("change"),r;if(b.text()===s||i.hasClass("error")){return true}r=b.html();b.text(s).trigger(q,s);if(q.result===false){b.html(r)}},m=function(q,r){if(r===f){return q.next("td")}else{if(r===e){return q.prev("td")}else{if(r===g){return q.parent().prev().children().eq(q.index())}else{if(r===d){return q.parent().next().children().eq(q.index())}}}}return[]};i.blur(function(){n();i.hide()}).keydown(function(q){if(q.which===k){n();i.hide();b.focus();q.preventDefault();q.stopPropagation()}else{if(q.which===l){i.val(b.text());q.preventDefault();q.stopPropagation();i.hide();b.focus()}else{if(q.which===p){b.focus()}else{if(this.selectionEnd-this.selectionStart===this.value.length){var r=m(b,q.which);if(r.length>0){r.focus();q.preventDefault();q.stopPropagation()}}}}}}).on("input paste",function(){var q=$.Event("validate");b.trigger(q,i.val());if(q.result===false){i.addClass("error")}else{i.removeClass("error")}});j.on("click keypress dblclick",o).css("cursor","pointer").keydown(function(q){var s=true,r=m($(q.target),q.which);if(r.length>0){r.focus()}else{if(q.which===k){o(false)}else{if(q.which===17||q.which===91||q.which===93){o(true);s=false}else{s=false}}}if(s){q.stopPropagation();q.preventDefault()}});j.find("td").prop("tabindex",1);$(window).on("resize",function(){if(i.is(":visible")){i.offset(b.offset()).width(b.width()).height(b.height())}})})};$.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight","border","border-top","border-bottom","border-left","border-right"],editor:$("<input>")};