/* X-editable - v1.5.1 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
(function(a){var b=function(c,d){this.options=a.extend({},a.fn.editableform.defaults,d);this.$div=a(c);if(!this.options.scope){this.options.scope=this}};b.prototype={constructor:b,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var c=this.$form.find(".editable-buttons");c.append(a.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){c.addClass("editable-buttons-bottom")}},render:function(){this.$loading=a(a.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);a.when(this.input.render()).then(a.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(d){d.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var c=(this.value===null||this.value===undefined||this.value==="")?this.options.defaultValue:this.value;this.input.value2input(c);this.$form.submit(a.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var d,c;if(this.$form){d=this.$form.outerWidth();c=this.$form.outerHeight();if(d){this.$loading.width(d)}if(c){this.$loading.height(c)}this.$form.hide()}else{d=this.$loading.parent().width();if(d){this.$loading.width(d)}}this.$loading.show()},showForm:function(c){this.$loading.hide();this.$form.show();if(c!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(g){var d=this.$form.find(".control-group"),c=this.$form.find(".editable-error-block"),f;if(g===false){d.removeClass(a.fn.editableform.errorGroupClass);c.removeClass(a.fn.editableform.errorBlockClass).empty().hide()}else{if(g){f=(""+g).split("\n");for(var e=0;e<f.length;e++){f[e]=a("<div>").text(f[e]).html()}g=f.join("<br>")}d.addClass(a.fn.editableform.errorGroupClass);c.addClass(a.fn.editableform.errorBlockClass).html(g).show()}},submit:function(c){c.stopPropagation();c.preventDefault();var f=this.input.input2value();var d=this.validate(f);if(a.type(d)==="object"&&d.newValue!==undefined){f=d.newValue;this.input.value2input(f);if(typeof d.msg==="string"){this.error(d.msg);this.showForm();return}}else{if(d){this.error(d);this.showForm();return}}if(!this.options.savenochange&&this.input.value2str(f)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var g=this.input.value2submit(f);this.isSaving=true;a.when(this.save(g)).done(a.proxy(function(h){this.isSaving=false;var e=typeof this.options.success==="function"?this.options.success.call(this.options.scope,h,f):null;if(e===false){this.error(false);this.showForm(false);return}if(typeof e==="string"){this.error(e);this.showForm();return}if(e&&typeof e==="object"&&e.hasOwnProperty("newValue")){f=e.newValue}this.error(false);this.value=f;this.$div.triggerHandler("save",{newValue:f,submitValue:g,response:h})},this)).fail(a.proxy(function(h){this.isSaving=false;var e;if(typeof this.options.error==="function"){e=this.options.error.call(this.options.scope,h,f)}else{e=typeof h==="string"?h:h.responseText||h.statusText||"Unknown error!"}this.error(e);this.showForm()},this))},save:function(f){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,true);var d=(typeof this.options.pk==="function")?this.options.pk.call(this.options.scope):this.options.pk,e=!!(typeof this.options.url==="function"||(this.options.url&&((this.options.send==="always")||(this.options.send==="auto"&&d!==null&&d!==undefined)))),c;if(e){this.showLoading();c={name:this.options.name||"",value:f,pk:d};if(typeof this.options.params==="function"){c=this.options.params.call(this.options.scope,c)}else{this.options.params=a.fn.editableutils.tryParseJson(this.options.params,true);a.extend(c,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,c)}else{return a.ajax(a.extend({url:this.options.url,data:c,type:"POST"},this.options.ajaxOptions))}}},validate:function(c){if(c===undefined){c=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,c)}},option:function(c,d){if(c in this.options){this.options[c]=d}if(c==="value"){this.setValue(d)}},setValue:function(d,c){if(c){this.value=this.input.str2value(d)}else{this.value=d}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};a.fn.editableform=function(d){var c=arguments;return this.each(function(){var e=a(this),f=e.data("editableform"),g=typeof d==="object"&&d;if(!f){e.data("editableform",(f=new b(this,g)))}if(typeof d==="string"){f[d].apply(f,Array.prototype.slice.call(c,1))}})};a.fn.editableform.Constructor=b;a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';a.fn.editableform.loading='<div class="editableform-loading"></div>';a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';a.fn.editableform.errorGroupClass=null;a.fn.editableform.errorBlockClass="editable-error";a.fn.editableform.engine="jquery"}(window.jQuery));(function(a){a.fn.editableutils={inherit:function(b,d){var c=function(){};c.prototype=d.prototype;b.prototype=new c();b.prototype.constructor=b;b.superclass=d.prototype},setCursorPosition:function(b,c){if(b.setSelectionRange){b.setSelectionRange(c,c)}else{if(b.createTextRange){var d=b.createTextRange();d.collapse(true);d.moveEnd("character",c);d.moveStart("character",c);d.select()}}},tryParseJson:function(c,d){if(typeof c==="string"&&c.length&&c.match(/^[\{\[].*[\}\]]$/)){if(d){try{c=(new Function("return "+c))()}catch(b){}finally{return c}}else{c=(new Function("return "+c))()}}return c},sliceObj:function(h,f,b){var d,e,g={};if(!a.isArray(f)||!f.length){return g}for(var c=0;c<f.length;c++){d=f[c];if(h.hasOwnProperty(d)){g[d]=h[d]}if(b===true){continue}e=d.toLowerCase();if(h.hasOwnProperty(e)){g[d]=h[e]}}return g},getConfigData:function(b){var c={};a.each(b.data(),function(d,e){if(typeof e!=="object"||(e&&typeof e==="object"&&(e.constructor===Object||e.constructor===Array))){c[d]=e}});return c},objectKeys:function(c){if(Object.keys){return Object.keys(c)}else{if(c!==Object(c)){throw new TypeError("Object.keys called on a non-object")}var b=[],d;for(d in c){if(Object.prototype.hasOwnProperty.call(c,d)){b.push(d)}}return b}},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(g,e,h){if(!e||g===null){return[]}if(typeof(h)!=="function"){var b=h||"value";h=function(i){return i[b]}}var c=a.isArray(g),d=[],f=this;a.each(e,function(j,l){if(l.children){d=d.concat(f.itemsByValue(g,l.children,h))}else{if(c){if(a.grep(g,function(i){return i==(l&&typeof l==="object"?h(l):l)}).length){d.push(l)}}else{var k=(l&&(typeof l==="object"))?h(l):l;if(g==k){d.push(l)}}}});return d},createInput:function(c){var e,f,b,d=c.type;if(d==="date"){if(c.mode==="inline"){if(a.fn.editabletypes.datefield){d="datefield"}else{if(a.fn.editabletypes.dateuifield){d="dateuifield"}}}else{if(a.fn.editabletypes.date){d="date"}else{if(a.fn.editabletypes.dateui){d="dateui"}}}if(d==="date"&&!a.fn.editabletypes.date){d="combodate"}}if(d==="datetime"&&c.mode==="inline"){d="datetimefield"}if(d==="wysihtml5"&&!a.fn.editabletypes[d]){d="textarea"}if(typeof a.fn.editabletypes[d]==="function"){e=a.fn.editabletypes[d];f=this.sliceObj(c,this.objectKeys(e.defaults));b=new e(f);return b}else{a.error("Unknown type: "+d);return false}},supportsTransitions:function(){var c=document.body||document.documentElement,f=c.style,e="transition",g=["Moz","Webkit","Khtml","O","ms"];if(typeof f[e]==="string"){return true}e=e.charAt(0).toUpperCase()+e.substr(1);for(var d=0;d<g.length;d++){if(typeof f[g[d]+e]==="string"){return true}}return false}}}(window.jQuery));(function(a){var c=function(d,e){this.init(d,e)};var b=function(d,e){this.init(d,e)};c.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(d,e){this.$element=a(d);this.options=a.extend({},a.fn.editableContainer.defaults,e);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",a.proxy(function(){this.destroy()},this));if(!a(document).data("editable-handlers-attached")){a(document).on("keyup.editable",function(f){if(f.which===27){a(".editable-open").editableContainer("hide")}});a(document).on("click.editable",function(g){var f=a(g.target),j,h=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!a.contains(document.documentElement,g.target)){return}if(f.is(document)){return}for(j=0;j<h.length;j++){if(f.is(h[j])||f.parents(h[j]).length){return}}c.prototype.closeOthers(g.target)});a(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!a.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var d in this.options){if(d in this.defaults){this.containerOptions[d]=this.options[d]}else{this.formOptions[d]=this.options[d]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var d;if(this.containerDataName){if(d=this.$element.data(this.containerDataName)){return d}}d=this.$element.data(this.containerName);return d},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(d){this.$element.addClass("editable-open");if(d!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=a("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(d){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:d};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",d||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(d){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(d)}},setPosition:function(){},save:function(d,f){this.$element.triggerHandler("save",f);this.hide("save")},option:function(d,e){this.options[d]=e;if(d in this.containerOptions){this.containerOptions[d]=e;this.setContainerOption(d,e)}else{this.formOptions[d]=e;if(this.$form){this.$form.editableform("option",d,e)}}},setContainerOption:function(d,e){this.call("option",d,e)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(d){a(".editable-open").each(function(h,g){if(g===d||a(g).find(d).length){return}var e=a(g),f=e.data("editableContainer");if(!f){return}if(f.options.onblur==="cancel"){e.data("editableContainer").hide("onblur")}else{if(f.options.onblur==="submit"){e.data("editableContainer").tip().find("form").submit()}}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};a.fn.editableContainer=function(e){var d=arguments;return this.each(function(){var f=a(this),i="editableContainer",h=f.data(i),j=typeof e==="object"&&e,g=(j.mode==="inline")?b:c;if(!h){f.data(i,(h=new g(this,j)))}if(typeof e==="string"){h[e].apply(h,Array.prototype.slice.call(d,1))}})};a.fn.editableContainer.Popup=c;a.fn.editableContainer.Inline=b;a.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(d){if(d.handler){d.handler()}}}}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.editable.defaults,d,a.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!a.fn.editableutils.supportsTransitions()){this.options.highlight=false}};b.prototype={constructor:b,init:function(){var e=false,c,d;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=a.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(a.trim(this.$element.html()));e=true}else{this.options.value=a.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.input.type==="textarea"){this.$element.addClass("editable-pre-wrapped")}if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",a.proxy(function(g){if(!this.options.disabled){g.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var f=(this.options.toggle!=="click");this.toggle(f)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":c=true;break;case"auto":c=!a.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!e;break;default:c=false}a.when(c?this.render():true).then(a.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var c=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",c,a.proxy(function(f){var d=a(f.target);if(!d.data("editable")){if(d.hasClass(this.options.emptyclass)){d.empty()}d.editable(this.options).trigger(f)}},this))},render:function(c){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,c)}else{if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,c)}else{return this.input.value2html(this.value,this.$element[0])}}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(c,d){if(c&&typeof c==="object"){a.each(c,a.proxy(function(e,f){this.option(a.trim(e),f)},this));return}this.options[c]=d;if(c==="disabled"){return d?this.disable():this.enable()}if(c==="value"){this.setValue(d)}if(this.container){this.container.option(c,d)}if(this.input.option){this.input.option(c,d)}},handleEmpty:function(c){if(this.options.display===false){return}if(c!==undefined){this.isEmpty=c}else{if(typeof(this.input.isEmpty)==="function"){this.isEmpty=this.input.isEmpty(this.$element)}else{this.isEmpty=a.trim(this.$element.html())===""}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else{if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(c){if(this.options.disabled){return}if(!this.container){var d=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(d);this.$element.on("save.internal",a.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else{if(this.container.tip().is(":visible")){return}}this.container.show(c)},hide:function(){if(this.container){this.container.hide()}},toggle:function(c){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(c)}},save:function(f,g){if(this.options.unsavedclass){var h=false;h=h||typeof this.options.url==="function";h=h||this.options.display===false;h=h||g.response!==undefined;h=h||(this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(g.newValue));if(h){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var c=this.$element,d=c.css("background-color");c.css("background-color",this.options.highlight);setTimeout(function(){if(d==="transparent"){d=""}c.css("background-color",d);c.addClass("editable-bg-transition");setTimeout(function(){c.removeClass("editable-bg-transition")},1700)},10)}this.setValue(g.newValue,false,g.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(e,c,d){if(c){this.value=this.input.str2value(e)}else{this.value=e}if(this.container){this.container.option("value",this.value)}a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};a.fn.editable=function(j){var l={},e=arguments,g="editable";switch(j){case"validate":this.each(function(){var n=a(this),o=n.data(g),p;if(o&&(p=o.validate())){l[o.options.name]=p}});return l;case"getValue":if(arguments.length===2&&arguments[1]===true){l=this.eq(0).data(g).value}else{this.each(function(){var n=a(this),o=n.data(g);if(o&&o.value!==undefined&&o.value!==null){l[o.options.name]=o.input.value2submit(o.value)}})}return l;case"submit":var f=arguments[1]||{},c=this,i=this.editable("validate");if(a.isEmptyObject(i)){var d={};if(c.length===1){var h=c.data("editable");var k={name:h.options.name||"",value:h.input.value2submit(h.value),pk:(typeof h.options.pk==="function")?h.options.pk.call(h.options.scope):h.options.pk};if(typeof h.options.params==="function"){k=h.options.params.call(h.options.scope,k)}else{h.options.params=a.fn.editableutils.tryParseJson(h.options.params,true);a.extend(k,h.options.params)}d={url:h.options.url,data:k,type:"POST"};f.success=f.success||h.options.success;f.error=f.error||h.options.error}else{var m=this.editable("getValue");d={url:f.url,data:m,type:"POST"}}d.success=typeof f.success==="function"?function(n){f.success.call(c,n,f)}:a.noop;d.error=typeof f.error==="function"?function(){f.error.apply(c,arguments)}:a.noop;if(f.ajaxOptions){a.extend(d,f.ajaxOptions)}if(f.data){a.extend(d.data,f.data)}a.ajax(d)}else{if(typeof f.error==="function"){f.error.call(c,i)}}return this}return this.each(function(){var n=a(this),o=n.data(g),p=typeof j==="object"&&j;if(p&&p.selector){o=new b(this,p);return}if(!o){n.data(g,(o=new b(this,p)))}if(typeof j==="string"){o[j].apply(o,Array.prototype.slice.call(e,1))}})};a.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery));(function(a){a.fn.editabletypes={};var b=function(){};b.prototype={init:function(e,d,c){this.type=e;this.options=a.extend({},c,d)},prerender:function(){this.$tpl=a(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(d,c){a(c)[this.options.escape?"text":"html"](a.trim(d))},html2value:function(c){return a("<div>").html(c).text()},value2str:function(c){return c},str2value:function(c){return c},value2submit:function(c){return c},value2input:function(c){this.$input.val(c)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(c){return a("<div>").text(c).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(c){if(this.options[c]!==undefined&&this.options[c]!==null){this.$input.attr(c,this.options[c])}},option:function(c,d){this.options[c]=d}};b.defaults={tpl:"",inputclass:null,escape:true,scope:null,showbuttons:true};a.extend(a.fn.editabletypes,{abstractinput:b})}(window.jQuery));(function(a){var b=function(c){};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){var c=a.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();c.resolve()},function(){this.error=this.options.sourceError;c.resolve()});return c.promise()},html2value:function(c){return null},value2html:function(h,e,d,f){var c=a.Deferred(),g=function(){if(typeof d==="function"){d.call(e,h,this.sourceData,f)}else{this.value2htmlFinal(h,e)}c.resolve()};if(h===null){g.call(this)}else{this.onSourceReady(g,function(){c.resolve()})}return c.promise()},onSourceReady:function(j,h){var i;if(a.isFunction(this.options.source)){i=this.options.source.call(this.options.scope);this.sourceData=null}else{i=this.options.source}if(this.options.sourceCache&&a.isArray(this.sourceData)){j.call(this);return}try{i=a.fn.editableutils.tryParseJson(i,false)}catch(g){h.call(this);return}if(typeof i==="string"){if(this.options.sourceCache){var f=i,d;if(!a(document).data(f)){a(document).data(f,{})}d=a(document).data(f);if(d.loading===false&&d.sourceData){this.sourceData=d.sourceData;this.doPrepend();j.call(this);return}else{if(d.loading===true){d.callbacks.push(a.proxy(function(){this.sourceData=d.sourceData;this.doPrepend();j.call(this)},this));d.err_callbacks.push(a.proxy(h,this));return}else{d.loading=true;d.callbacks=[];d.err_callbacks=[]}}}var c=a.extend({url:i,type:"get",cache:false,dataType:"json",success:a.proxy(function(e){if(d){d.loading=false}this.sourceData=this.makeArray(e);if(a.isArray(this.sourceData)){if(d){d.sourceData=this.sourceData;a.each(d.callbacks,function(){this.call()})}this.doPrepend();j.call(this)}else{h.call(this);if(d){a.each(d.err_callbacks,function(){this.call()})}}},this),error:a.proxy(function(){h.call(this);if(d){d.loading=false;a.each(d.err_callbacks,function(){this.call()})}},this)},this.options.sourceOptions);a.ajax(c)}else{this.sourceData=this.makeArray(i);if(a.isArray(this.sourceData)){this.doPrepend();j.call(this)}else{h.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!a.isArray(this.prependData)){if(a.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(a.isArray(this.prependData)&&a.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(d,c){},makeArray:function(d){var c,h,j=[],f,g;if(!d||typeof d==="string"){return null}if(a.isArray(d)){g=function(i,l){h={value:i,text:l};if(c++>=2){return false}};for(var e=0;e<d.length;e++){f=d[e];if(typeof f==="object"){c=0;a.each(f,g);if(c===1){j.push(h)}else{if(c>1){if(f.children){f.children=this.makeArray(f.children)}j.push(f)}}}else{j.push({value:f,text:f})}}}else{a.each(d,function(i,l){j.push({value:i,text:l})})}return j},option:function(c,d){this.options[c]=d;if(c==="source"){this.sourceData=null}if(c==="prepend"){this.prependData=null}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true,sourceOptions:null});a.fn.editabletypes.list=b}(window.jQuery));(function(a){var b=function(c){this.init("text",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=a('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(c){if(~a.inArray(c.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var d=this;this.t=setTimeout(function(){d.toggleClear(c)},100)},this)).parent().css("position","relative");this.$clear.click(a.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(c){if(!this.$clear){return}var d=this.$input.val().length,f=this.$clear.is(":visible");if(d&&!f){this.$clear.show()}if(!d&&f){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});a.fn.editabletypes.text=b}(window.jQuery));(function(a){var b=function(c){this.init("textarea",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(c){if(c.ctrlKey&&c.which===13){a(this).closest("form").submit()}})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});a.fn.editabletypes.textarea=b}(window.jQuery));(function(a){var b=function(c){this.init("select",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input.empty();var c=function(d,f){var e;if(a.isArray(f)){for(var g=0;g<f.length;g++){e={};if(f[g].children){e.label=f[g].text;d.append(c(a("<optgroup>",e),f[g].children))}else{e.value=f[g].value;if(f[g].disabled){e.disabled=true}d.append(a("<option>",e).text(f[g].text))}}}return d};c(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(d){if(d.which===13){a(this).closest("form").submit()}})},value2htmlFinal:function(f,c){var e="",d=a.fn.editableutils.itemsByValue(f,this.sourceData);if(d.length){e=d[0].text}a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"});a.fn.editabletypes.select=b}(window.jQuery));(function(a){var b=function(c){this.init("checklist",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){var d,c;this.$tpl.empty();if(!a.isArray(this.sourceData)){return}for(var e=0;e<this.sourceData.length;e++){d=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[e].value})).append(a("<span>").text(" "+this.sourceData[e].text));a("<div>").append(d).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(c){return a.isArray(c)?c.sort().join(a.trim(this.options.separator)):""},str2value:function(d){var c,e=null;if(typeof d==="string"&&d.length){c=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*");e=d.split(c)}else{if(a.isArray(d)){e=d}else{e=[d]}}return e},value2input:function(c){this.$input.prop("checked",false);if(a.isArray(c)&&c.length){this.$input.each(function(f,e){var d=a(e);a.each(c,function(g,h){if(d.val()==h){d.prop("checked",true)}})})}},input2value:function(){var c=[];this.$input.filter(":checked").each(function(e,d){c.push(a(d).val())});return c},value2htmlFinal:function(g,d){var f=[],c=a.fn.editableutils.itemsByValue(g,this.sourceData),e=this.options.escape;if(c.length){a.each(c,function(h,k){var j=e?a.fn.editableutils.escape(k.text):k.text;f.push(j)});a(d).html(f.join("<br>"))}else{a(d).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(c){if(c.which===13){a(this).closest("form").submit()}})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});a.fn.editabletypes.checklist=b}(window.jQuery));(function(a){var b=function(c){this.init("password",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{value2html:function(d,c){if(d){a(c).text("[hidden]")}else{a(c).empty()}},html2value:function(c){return null}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});a.fn.editabletypes.password=b}(window.jQuery));(function(a){var b=function(c){this.init("email",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});a.fn.editabletypes.email=b}(window.jQuery));(function(a){var b=function(c){this.init("url",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});a.fn.editabletypes.url=b}(window.jQuery));(function(a){var b=function(c){this.init("tel",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});a.fn.editabletypes.tel=b}(window.jQuery));(function(a){var b=function(c){this.init("number",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{render:function(){b.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});a.fn.editabletypes.number=b}(window.jQuery));(function(a){var b=function(c){this.init("range",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}});b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});a.fn.editabletypes.range=b}(window.jQuery));(function(a){var b=function(c){this.init("time",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});a.fn.editabletypes.time=b}(window.jQuery));(function(a){var b=function(d){this.init("select2",d,b.defaults);d.select2=d.select2||{};this.sourceData=null;if(d.placeholder){d.select2.placeholder=d.placeholder}if(!d.select2.tags&&d.source){var e=d.source;if(a.isFunction(d.source)){e=d.source.call(d.scope)}if(typeof e==="string"){d.select2.ajax=d.select2.ajax||{};if(!d.select2.ajax.data){d.select2.ajax.data=function(f){return{query:f}}}if(!d.select2.ajax.results){d.select2.ajax.results=function(f){return{results:f}}}d.select2.ajax.url=e}else{this.sourceData=this.convertSource(e);d.select2.data=this.sourceData}}this.options.select2=a.extend({},b.defaults.select2,d.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote=("ajax" in this.options.select2);this.idFunc=this.options.select2.id;if(typeof(this.idFunc)!=="function"){var c=this.idFunc||"id";this.idFunc=function(f){return f[c]}}this.formatSelection=this.options.select2.formatSelection;if(typeof(this.formatSelection)!=="function"){this.formatSelection=function(f){return f.text}}};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();if(this.isRemote){this.$input.on("select2-loaded",a.proxy(function(c){this.sourceData=c.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(g,d){var e="",c,f=this;if(this.options.select2.tags){c=g}else{if(this.sourceData){c=a.fn.editableutils.itemsByValue(g,this.sourceData,this.idFunc)}else{}}if(a.isArray(c)){e=[];a.each(c,function(h,i){e.push(i&&typeof i==="object"?f.formatSelection(i):i)})}else{if(c){e=f.formatSelection(c)}}e=a.isArray(e)?e.join(this.options.viewseparator):e;b.superclass.value2html.call(this,e,d)},html2value:function(c){return this.options.select2.tags?this.str2value(c,this.options.viewseparator):null},value2input:function(g){if(a.isArray(g)){g=g.join(this.getSeparator())}if(!this.$input.data("select2")){this.$input.val(g);this.$input.select2(this.options.select2)}else{this.$input.val(g).trigger("change",true)}if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var d=this.options.select2.id,e=this.options.select2.formatSelection;if(!d&&!e){var c=a(this.options.scope);if(!c.data("editable").isEmpty){var f={id:g,text:c.text()};this.$input.select2("data",f)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(f,e){if(typeof f!=="string"||!this.isMultiple){return f}e=e||this.getSeparator();var g,c,d;if(f===null||f.length<1){return null}g=f.split(e);for(c=0,d=g.length;c<d;c=c+1){g[c]=a.trim(g[c])}return g},autosubmit:function(){this.$input.on("change",function(c,d){if(!d){a(this).closest("form").submit()}})},getSeparator:function(){return this.options.select2.separator||a.fn.select2.defaults.separator},convertSource:function(d){if(a.isArray(d)&&d.length&&d[0].value!==undefined){for(var c=0;c<d.length;c++){if(d[c].value!==undefined){d[c].id=d[c].value;delete d[c].value}}}return d},destroy:function(){if(this.$input.data("select2")){this.$input.select2("destroy")}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});a.fn.editabletypes.select2=b}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);if(!this.$element.is("input")){a.error("Combodate should be applied to INPUT element");return}this.options=a.extend({},a.fn.combodate.defaults,d,this.$element.data());this.init()};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=a('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",a.proxy(function(c){this.$element.val(this.getValue()).change();if(this.options.smartDays){if(a(c.target).is(".month")||a(c.target).is(".year")){this.fillCombo("day")}}},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var c=this.options.template;a.each(this.map,function(d,g){g=g[0];var e=new RegExp(g+"+"),f=g.length>1?g.substring(1,2):g;c=c.replace(e,"{"+f+"}")});c=c.replace(/ /g,"&nbsp;");a.each(this.map,function(d,f){f=f[0];var e=f.length>1?f.substring(1,2):f;c=c.replace("{"+e+"}",'<select class="'+d+'"></select>')});return c},initCombos:function(){for(var d in this.map){var c=this.$widget.find("."+d);this["$"+d]=c.length?c:null;this.fillCombo(d)}},fillCombo:function(h){var c=this["$"+h];if(!c){return}var d="fill"+h.charAt(0).toUpperCase()+h.slice(1);var g=this[d]();var j=c.val();c.empty();for(var e=0;e<g.length;e++){c.append('<option value="'+g[e][0]+'">'+g[e][1]+"</option>")}c.val(j)},fillCommon:function(d){var f=[],e;if(this.options.firstItem==="name"){e=moment.relativeTime||moment.langData()._relativeTime;var c=typeof e[d]==="function"?e[d](1,true,d,false):e[d];c=c.split(" ").reverse()[0];f.push(["",c])}else{if(this.options.firstItem==="empty"){f.push(["",""])}}return f},fillDay:function(){var e=this.fillCommon("d"),g,d,h=this.options.template.indexOf("DD")!==-1,c=31;if(this.options.smartDays&&this.$month&&this.$year){var f=parseInt(this.$month.val(),10);var j=parseInt(this.$year.val(),10);if(!isNaN(f)&&!isNaN(j)){c=moment([j,f]).daysInMonth()}}for(d=1;d<=c;d++){g=h?this.leadZero(d):d;e.push([d,g])}return e},fillMonth:function(){var d=this.fillCommon("M"),f,c,e=this.options.template.indexOf("MMMM")!==-1,g=this.options.template.indexOf("MMM")!==-1,h=this.options.template.indexOf("MM")!==-1;for(c=0;c<=11;c++){if(e){f=moment().date(1).month(c).format("MMMM")}else{if(g){f=moment().date(1).month(c).format("MMM")}else{if(h){f=this.leadZero(c+1)}else{f=c+1}}}d.push([c,f])}return d},fillYear:function(){var d=[],f,c,e=this.options.template.indexOf("YYYY")!==-1;for(c=this.options.maxYear;c>=this.options.minYear;c--){f=e?c:(c+"").substring(2);d[this.options.yearDescending?"push":"unshift"]([c,f])}d=this.fillCommon("y").concat(d);return d},fillHour:function(){var f=this.fillCommon("h"),j,e,c=this.options.template.indexOf("h")!==-1,d=this.options.template.indexOf("H")!==-1,k=this.options.template.toLowerCase().indexOf("hh")!==-1,h=c?1:0,g=c?12:23;for(e=h;e<=g;e++){j=k?this.leadZero(e):e;f.push([e,j])}return f},fillMinute:function(){var d=this.fillCommon("m"),e,c,f=this.options.template.indexOf("mm")!==-1;for(c=0;c<=59;c+=this.options.minuteStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillSecond:function(){var d=this.fillCommon("s"),e,c,f=this.options.template.indexOf("ss")!==-1;for(c=0;c<=59;c+=this.options.secondStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillAmpm:function(){var c=this.options.template.indexOf("a")!==-1,d=this.options.template.indexOf("A")!==-1,e=[["am",c?"am":"AM"],["pm",c?"pm":"PM"]];return e},getValue:function(d){var c,g={},f=this,e=false;a.each(this.map,function(i,j){if(i==="ampm"){return}var h=i==="day"?1:0;g[i]=f["$"+i]?parseInt(f["$"+i].val(),10):h;if(isNaN(g[i])){e=true;return false}});if(e){return""}if(this.$ampm){if(g.hour===12){g.hour=this.$ampm.val()==="am"?0:12}else{g.hour=this.$ampm.val()==="am"?g.hour:g.hour+12}}c=moment([g.year,g.month,g.day,g.hour,g.minute,g.second]);this.highlight(c);d=d===undefined?this.options.format:d;if(d===null){return c.isValid()?c:null}else{return c.isValid()?c.format(d):""}},setValue:function(f){if(!f){return}var c=typeof f==="string"?moment(f,this.options.format):moment(f),e=this,g={};function d(h,j){var i={};h.children("option").each(function(l,m){var n=a(m).attr("value"),k;if(n===""){return}k=Math.abs(n-j);if(typeof i.distance==="undefined"||k<i.distance){i={value:n,distance:k}}});return i.value}if(c.isValid()){a.each(this.map,function(h,i){if(h==="ampm"){return}g[h]=c[i[1]]()});if(this.$ampm){if(g.hour>=12){g.ampm="pm";if(g.hour>12){g.hour-=12}}else{g.ampm="am";if(g.hour===0){g.hour=12}}}a.each(g,function(h,i){if(e["$"+h]){if(h==="minute"&&e.options.minuteStep>1&&e.options.roundTime){i=d(e["$"+h],i)}if(h==="second"&&e.options.secondStep>1&&e.options.roundTime){i=d(e["$"+h],i)}e["$"+h].val(i)}});if(this.options.smartDays){this.fillCombo("day")}this.$element.val(c.format(this.options.format)).change()}},highlight:function(c){if(!c.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(c){return c<=9?"0"+c:c},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};a.fn.combodate=function(f){var e,c=Array.apply(null,arguments);c.shift();if(f==="getValue"&&this.length&&(e=this.eq(0).data("combodate"))){return e.getValue.apply(e,c)}return this.each(function(){var d=a(this),g=d.data("combodate"),h=typeof f=="object"&&f;if(!g){d.data("combodate",(g=new b(this,h)))}if(typeof f=="string"&&typeof g[f]=="function"){g[f].apply(g,c)}})};a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true,smartDays:false}}(window.jQuery));(function(a){var b=function(c){this.init("combodate",c,b.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}c.combodate=a.fn.editableutils.tryParseJson(c.combodate,true);this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate);if(a.fn.editableform.engine==="bs3"){this.$input.siblings().find("select").addClass("form-control")}if(this.options.inputclass){this.$input.siblings().find("select").addClass(this.options.inputclass)}},value2html:function(e,c){var d=e?e.format(this.options.viewformat):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return c?moment(c,this.options.viewformat):null},value2str:function(c){return c?c.format(this.options.format):""},str2value:function(c){return c?moment(c,this.options.format):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.combodate("setValue",c)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});a.fn.editabletypes.combodate=b}(window.jQuery));(function(a){var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var f=this.input.options.inputclass===null||this.input.options.inputclass===false;var e="input-sm";var h="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");if(~a.inArray(this.input.type,h)){this.input.$input.addClass("form-control");if(f){this.input.options.inputclass=e;this.input.$input.addClass(e)}}var c=this.$form.find(".editable-buttons");var d=f?[e]:this.input.options.inputclass.split(" ");for(var g=0;g<d.length;g++){if(d[g].toLowerCase()==="input-lg"){c.find("button").removeClass("btn-sm").addClass("btn-lg")}}}});a.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-md editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-md editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';a.fn.editableform.errorGroupClass="has-error";a.fn.editableform.errorBlockClass=null;a.fn.editableform.engine="bs3"}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:a.fn.popover.Constructor.DEFAULTS,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:this.defaults.template});var b;if(this.$element.data("template")){b=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(b){this.$element.data("template",b)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(b,c){this.container().options[b]=c},setPosition:function(){(function(){var c=this.tip();var n=typeof this.options.placement=="function"?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement;var g=/\s?auto?\s?/i;var f=g.test(n);if(f){n=n.replace(g,"")||"top"}var o=this.getPosition();var e=c[0].offsetWidth;var d=c[0].offsetHeight;if(f){var b=this.$element.parent();var j=n;var i=document.documentElement.scrollTop||document.body.scrollTop;var m=this.options.container=="body"?window.innerWidth:b.outerWidth();var k=this.options.container=="body"?window.innerHeight:b.outerHeight();var l=this.options.container=="body"?0:b.offset().left;n=n=="bottom"&&o.top+o.height+d-i>k?"top":n=="top"&&o.top-i-d<0?"bottom":n=="right"&&o.right+e>m?"left":n=="left"&&o.left-e<l?"right":n;c.removeClass(j).addClass(n)}var h=this.getCalculatedOffset(n,o,e,d);this.applyPlacement(h,n)}).call(this.container())}})}(window.jQuery));(function(a){function l(){return new Date(Date.UTC.apply(Date,arguments))}function m(){var n=new Date();return l(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())}var c=function(n,o){var p=this;this._process_options(o);this.element=a(n);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=a(g.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(q,r){return parseInt(r)+1})}this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};c.prototype={constructor:c,_process_options:function(r){this._o=a.extend({},this._o,r);var q=this.o=a.extend({},this._o);var p=q.language;if(!e[p]){p=p.split("-")[0];if(!e[p]){p=f.language}}q.language=p;switch(q.startView){case 2:case"decade":q.startView=2;break;case 1:case"year":q.startView=1;break;default:q.startView=0}switch(q.minViewMode){case 1:case"months":q.minViewMode=1;break;case 2:case"years":q.minViewMode=2;break;default:q.minViewMode=0}q.startView=Math.max(q.startView,q.minViewMode);q.weekStart%=7;q.weekEnd=((q.weekStart+6)%7);var n=g.parseFormat(q.format);if(q.startDate!==-Infinity){q.startDate=g.parseDate(q.startDate,n,q.language)}if(q.endDate!==Infinity){q.endDate=g.parseDate(q.endDate,n,q.language)}q.daysOfWeekDisabled=q.daysOfWeekDisabled||[];if(!a.isArray(q.daysOfWeekDisabled)){q.daysOfWeekDisabled=q.daysOfWeekDisabled.split(/[,\s]*/)}q.daysOfWeekDisabled=a.map(q.daysOfWeekDisabled,function(o){return parseInt(o,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.on(o)}},_unapplyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.off(o)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(n){if(!(this.element.is(n.target)||this.element.find(n.target).size()||this.picker.is(n.target)||this.picker.find(n.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(p,n){var o=n||this.date,q=new Date(o.getTime()+(o.getTimezoneOffset()*60000));this.element.trigger({type:p,date:q,format:a.proxy(function(r){var s=r||this.o.format;return g.formatDate(o,s,this.o.language)},this)})},show:function(n){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(n){n.preventDefault()}this._trigger("show")},hide:function(n){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var n=this.getUTCDate();return new Date(n.getTime()+(n.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(new Date(n.getTime()-(n.getTimezoneOffset()*60000)))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(n)}}else{this.element.val(n)}},getFormattedDate:function(n){if(n===undefined){n=this.o.format}return g.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var p=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!="auto"}).first().css("z-index"))+10;var o=this.component?this.component.parent().offset():this.element.offset();var n=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:o.top+n,left:o.left,zIndex:p})},_allow_update:true,update:function(){if(!this._allow_update){return}var n,o=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){n=arguments[0];o=true}else{n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=g.parseDate(n,this.o.format,this.o.language);if(o){this.setValue()}if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var o=this.o.weekStart,p="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';p+=n;this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(o<this.o.weekStart+7){p+='<th class="dow">'+e[this.o.language].daysMin[(o++)%7]+"</th>"}p+="</tr>";this.picker.find(".datepicker-days thead").append(p)},fillMonths:function(){var n="",o=0;while(o<12){n+='<span class="month">'+e[this.o.language].monthsShort[o++]+"</span>"}this.picker.find(".datepicker-months td").html(n)},setRange:function(n){if(!n||!n.length){delete this.range}else{this.range=a.map(n,function(o){return o.valueOf()})}this.fill()},getClassNames:function(p){var n=[],s=this.viewDate.getUTCFullYear(),q=this.viewDate.getUTCMonth(),o=this.date.valueOf(),r=new Date();if(p.getUTCFullYear()<s||(p.getUTCFullYear()==s&&p.getUTCMonth()<q)){n.push("old")}else{if(p.getUTCFullYear()>s||(p.getUTCFullYear()==s&&p.getUTCMonth()>q)){n.push("new")}}if(this.o.todayHighlight&&p.getUTCFullYear()==r.getFullYear()&&p.getUTCMonth()==r.getMonth()&&p.getUTCDate()==r.getDate()){n.push("today")}if(o&&p.valueOf()==o){n.push("active")}if(p.valueOf()<this.o.startDate||p.valueOf()>this.o.endDate||a.inArray(p.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){n.push("disabled")}if(this.range){if(p>this.range[0]&&p<this.range[this.range.length-1]){n.push("range")}if(a.inArray(p.valueOf(),this.range)!=-1){n.push("selected")}}return n},fill:function(){var s=new Date(this.viewDate),H=s.getUTCFullYear(),y=s.getUTCMonth(),D=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,C=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,v=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,q=this.date&&this.date.valueOf(),F;this.picker.find(".datepicker-days thead th.datepicker-switch").text(e[this.o.language].months[y]+" "+H);this.picker.find("tfoot th.today").text(e[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(e[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var B=l(H,y-1,28,0,0,0,0),t=g.getDaysInMonth(B.getUTCFullYear(),B.getUTCMonth());B.setUTCDate(t);B.setUTCDate(t-(B.getUTCDay()-this.o.weekStart+7)%7);var A=new Date(B);A.setUTCDate(A.getUTCDate()+42);A=A.valueOf();var w=[];var p;while(B.valueOf()<A){if(B.getUTCDay()==this.o.weekStart){w.push("<tr>");if(this.o.calendarWeeks){var G=new Date(+B+(this.o.weekStart-B.getUTCDay()-7)%7*86400000),E=new Date(+G+(7+4-G.getUTCDay())%7*86400000),J=new Date(+(J=l(E.getUTCFullYear(),0,1))+(7+4-J.getUTCDay())%7*86400000),o=(E-J)/86400000/7+1;w.push('<td class="cw">'+o+"</td>")}}p=this.getClassNames(B);p.push("day");var n=this.o.beforeShowDay(B);if(n===undefined){n={}}else{if(typeof(n)==="boolean"){n={enabled:n}}else{if(typeof(n)==="string"){n={classes:n}}}}if(n.enabled===false){p.push("disabled")}if(n.classes){p=p.concat(n.classes.split(/\s+/))}if(n.tooltip){F=n.tooltip}p=a.unique(p);w.push('<td class="'+p.join(" ")+'"'+(F?' title="'+F+'"':"")+">"+B.getUTCDate()+"</td>");if(B.getUTCDay()==this.o.weekEnd){w.push("</tr>")}B.setUTCDate(B.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var r=this.date&&this.date.getUTCFullYear();var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(H).end().find("span").removeClass("active");if(r&&r==H){z.eq(this.date.getUTCMonth()).addClass("active")}if(H<D||H>v){z.addClass("disabled")}if(H==D){z.slice(0,C).addClass("disabled")}if(H==v){z.slice(u+1).addClass("disabled")}w="";H=parseInt(H/10,10)*10;var I=this.picker.find(".datepicker-years").find("th:eq(1)").text(H+"-"+(H+9)).end().find("td");H-=1;for(var x=-1;x<11;x++){w+='<span class="year'+(x==-1?" old":x==10?" new":"")+(r==H?" active":"")+(H<D||H>v?" disabled":"")+'">'+H+"</span>";H+=1}I.html(w)},updateNavArrows:function(){if(!this._allow_update){return}var n=new Date(this.viewDate),p=n.getUTCFullYear(),o=n.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()&&o<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()&&o>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(q){q.preventDefault();var t=a(q.target).closest("span, td, th");if(t.length==1){switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var p=g.modes[this.viewMode].navStep*(t[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,p);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,p);break}this.fill();break;case"today":var n=new Date();n=l(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);this.showMode(-2);var u=this.o.todayBtn=="linked"?null:"view";this._setDate(n,u);break;case"clear":var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.val("").change()}this._trigger("changeDate");this.update();if(this.o.autoclose){this.hide()}break}break;case"span":if(!t.is(".disabled")){this.viewDate.setUTCDate(1);if(t.is(".month")){var o=1;var s=t.parent().find("span").index(t);var v=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(s);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(l(v,s,o,0,0,0,0))}}else{var v=parseInt(t.text(),10)||0;var o=1;var s=0;this.viewDate.setUTCFullYear(v);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(l(v,s,o,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(t.is(".day")&&!t.is(".disabled")){var o=parseInt(t.text(),10)||1;var v=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth();if(t.is(".old")){if(s===0){s=11;v-=1}else{s-=1}}else{if(t.is(".new")){if(s==11){s=0;v+=1}else{s+=1}}}this._setDate(l(v,s,o,0,0,0,0))}break}}},_setDate:function(n,p){if(!p||p=="date"){this.date=new Date(n)}if(!p||p=="view"){this.viewDate=new Date(n)}this.fill();this.setValue();this._trigger("changeDate");var o;if(this.isInput){o=this.element}else{if(this.component){o=this.element.find("input")}}if(o){o.change();if(this.o.autoclose&&(!p||p=="date")){this.hide()}}},moveMonth:function(n,p){if(!p){return n}var t=new Date(n.valueOf()),o=t.getUTCDate(),s=t.getUTCMonth(),r=Math.abs(p),u,v;p=p>0?1:-1;if(r==1){v=p==-1?function(){return t.getUTCMonth()==s}:function(){return t.getUTCMonth()!=u};u=s+p;t.setUTCMonth(u);if(u<0||u>11){u=(u+12)%12}}else{for(var q=0;q<r;q++){t=this.moveMonth(t,p)}u=t.getUTCMonth();t.setUTCDate(o);v=function(){return u!=t.getUTCMonth()}}while(v()){t.setUTCDate(--o);t.setUTCMonth(u)}return t},moveYear:function(n,o){return this.moveMonth(n,o*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(q){if(this.picker.is(":not(:visible)")){if(q.keyCode==27){this.show()}return}var n=false,p,o,s,t,u;switch(q.keyCode){case 27:this.hide();q.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}p=q.keyCode==37?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 38:case 40:if(!this.o.keyboardNavigation){break}p=q.keyCode==38?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p*7);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p*7)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 13:this.hide();q.preventDefault();break;case 9:this.hide();break}if(n){this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change()}}},showMode:function(n){if(n){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n))}this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var d=function(n,o){this.element=a(n);this.inputs=a.map(o.inputs,function(p){return p.jquery?p[0]:p});delete o.inputs;a(this.inputs).datepicker(o).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(p){return a(p).data("datepicker")});this.updateDates()};d.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var n=a.map(this.dates,function(o){return o.valueOf()});a.each(this.pickers,function(o,q){q.setRange(n)})},dateUpdated:function(o){var n=a(o.target).data("datepicker"),r=n.getUTCDate(),p=a.inArray(o.target,this.inputs),q=this.inputs.length;if(p==-1){return}if(r<this.dates[p]){while(p>=0&&r<this.dates[p]){this.pickers[p--].setUTCDate(r)}}else{if(r>this.dates[p]){while(p<q&&r>this.dates[p]){this.pickers[p++].setUTCDate(r)}}}this.updateDates()},remove:function(){a.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};function j(o,s){var n=a(o).data(),r={},p,t=new RegExp("^"+s.toLowerCase()+"([A-Z])"),s=new RegExp("^"+s.toLowerCase());for(var q in n){if(s.test(q)){p=q.replace(t,function(u,v){return v.toLowerCase()});r[p]=n[q]}}return r}function k(o){var p={};if(!e[o]){o=o.split("-")[0];if(!e[o]){return}}var n=e[o];a.each(h,function(q,r){if(r in n){p[r]=n[r]}});return p}var i=a.fn.datepicker;var b=a.fn.datepicker=function(p){var n=Array.apply(null,arguments);n.shift();var o,q;this.each(function(){var r=a(this),s=r.data("datepicker"),v=typeof p=="object"&&p;if(!s){var t=j(this,"date"),y=a.extend({},f,t,v),u=k(y.language),w=a.extend({},f,u,t,v);if(r.is(".input-daterange")||w.inputs){var x={inputs:w.inputs||r.find("input").toArray()};r.data("datepicker",(s=new d(this,a.extend(w,x))))}else{r.data("datepicker",(s=new c(this,w)))}}if(typeof p=="string"&&typeof s[p]=="function"){o=s[p].apply(s,n);if(o!==undefined){return false}}});if(o!==undefined){return o}else{return this}};var f=a.fn.datepicker.defaults={autoclose:false,beforeShowDay:a.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var h=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=c;var e=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return(((n%4===0)&&(n%100!==0))||(n%400===0))},getDaysInMonth:function(o,n){return[31,(g.isLeapYear(o)?29:28),31,30,31,30,31,31,30,31,30,31][n]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var p=n.replace(this.validParts,"\0").split("\0"),o=n.match(this.validParts);if(!p||!p.length||!o||o.length===0){throw new Error("Invalid date format.")}return{separators:p,parts:o}},parseDate:function(o,r,v){if(o instanceof Date){return o}if(typeof r==="string"){r=g.parseFormat(r)}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o)){var y=/([\-+]\d+)([dmwy])/,z=o.match(/([\-+]\d+)([dmwy])/g),x,p;o=new Date();for(var u=0;u<z.length;u++){x=y.exec(z[u]);p=parseInt(x[1]);switch(x[2]){case"d":o.setUTCDate(o.getUTCDate()+p);break;case"m":o=c.prototype.moveMonth.call(c.prototype,o,p);break;case"w":o.setUTCDate(o.getUTCDate()+p*7);break;case"y":o=c.prototype.moveYear.call(c.prototype,o,p);break}}return l(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0)}var z=o&&o.match(this.nonpunctuation)||[],o=new Date(),w={},C=["yyyy","yy","M","MM","m","mm","d","dd"],B={yyyy:function(s,E){return s.setUTCFullYear(E)},yy:function(s,E){return s.setUTCFullYear(2000+E)},m:function(s,E){E-=1;while(E<0){E+=12}E%=12;s.setUTCMonth(E);while(s.getUTCMonth()!=E){s.setUTCDate(s.getUTCDate()-1)}return s},d:function(s,E){return s.setUTCDate(E)}},D,q,x;B.M=B.MM=B.mm=B.m;B.dd=B.d;o=l(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);var t=r.parts.slice();if(z.length!=t.length){t=a(t).filter(function(s,E){return a.inArray(E,C)!==-1}).toArray()}if(z.length==t.length){for(var u=0,n=t.length;u<n;u++){D=parseInt(z[u],10);x=t[u];if(isNaN(D)){switch(x){case"MM":q=a(e[v].months).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].months)+1;break;case"M":q=a(e[v].monthsShort).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].monthsShort)+1;break}}w[x]=D}for(var u=0,A;u<C.length;u++){A=C[u];if(A in w&&!isNaN(w[A])){B[A](o,w[A])}}}return o},formatDate:function(o,p,r){if(typeof p==="string"){p=g.parseFormat(p)}var t={d:o.getUTCDate(),D:e[r].daysShort[o.getUTCDay()],DD:e[r].days[o.getUTCDay()],m:o.getUTCMonth()+1,M:e[r].monthsShort[o.getUTCMonth()],MM:e[r].months[o.getUTCMonth()],yy:o.getUTCFullYear().toString().substring(2),yyyy:o.getUTCFullYear()};t.dd=(t.d<10?"0":"")+t.d;t.mm=(t.m<10?"0":"")+t.m;var o=[],s=a.extend([],p.separators);for(var q=0,n=p.parts.length;q<=n;q++){if(s.length){o.push(s.shift())}o.push(t[p.parts[q]])}return o.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=g;a.fn.datepicker.noConflict=function(){a.fn.datepicker=i;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(o){var n=a(this);if(n.data("datepicker")){return}o.preventDefault();b.call(n,"show")});a(function(){b.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery));(function(a){a.fn.bdatepicker=a.fn.datepicker.noConflict();if(!a.fn.datepicker){a.fn.datepicker=a.fn.bdatepicker}var b=function(c){this.init("date",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datepicker=a.fn.editableutils.tryParseJson(d.datepicker,true);this.options.datepicker=a.extend({},c.datepicker,d.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=a.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return this.parseDate(c,this.parsedViewFormat)},value2str:function(c){return c?this.dpg.formatDate(c,this.parsedFormat,this.options.datepicker.language):""},str2value:function(c){return this.parseDate(c,this.parsedFormat)},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.bdatepicker("update",c)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(d){if(a(d.currentTarget).is(".old")||a(d.currentTarget).is(".new")){return}var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datepicker.language);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datepicker.language);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.date=b}(window.jQuery));(function(a){var b=function(c){this.init("datefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(c){this.$input.val(c?this.dpg.formatDate(c,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});a.fn.editabletypes.datefield=b}(window.jQuery));(function(a){var b=function(c){this.init("datetime",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datetimepicker=a.fn.editableutils.tryParseJson(d.datetimepicker,true);this.options.datetimepicker=a.extend({},c.datetimepicker,d.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=a.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(c){var d=a(this).closest("form").parent();setTimeout(function(){d.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(c){b.superclass.value2html.call(this,d,c)}else{return d}},html2value:function(c){var d=this.parseDate(c,this.parsedViewFormat);return d?this.fromUTC(d):null},value2str:function(c){return c?this.dpg.formatDate(this.toUTC(c),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(c){var d=this.parseDate(c,this.parsedFormat);return d?this.fromUTC(d):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){if(c){this.$input.data("datetimepicker").setDate(c)}},input2value:function(){var c=this.$input.data("datetimepicker");return c.date?c.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(d){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(c){return c?new Date(c.valueOf()-c.getTimezoneOffset()*60000):c},fromUTC:function(c){return c?new Date(c.valueOf()+c.getTimezoneOffset()*60000):c},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datetimepicker.language,this.options.formatType);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datetimepicker.language,this.options.formatType);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.datetime=b}(window.jQuery));(function(a){var b=function(c){this.init("datetimefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(c){this.$input.val(this.value2html(c));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});a.fn.editabletypes.datetimefield=b}(window.jQuery));