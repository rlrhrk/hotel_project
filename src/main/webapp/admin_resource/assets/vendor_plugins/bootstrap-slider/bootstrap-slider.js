/* =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
(function(d,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof module==="object"&&module.exports){var c;try{c=require("jquery")}catch(a){c=null}module.exports=b(c)}else{d.Slider=b(d.jQuery)}}}(this,function(a){var b;(function(c){var f=Array.prototype.slice;function e(){}function d(g){if(!g){return}function h(k){if(k.prototype.option){return}k.prototype.option=function(l){if(!g.isPlainObject(l)){return}this.options=g.extend(true,this.options,l)}}var j=typeof console==="undefined"?e:function(k){console.error(k)};function i(k,l){g.fn[k]=function(s){if(typeof s==="string"){var m=f.call(arguments,1);for(var o=0,q=this.length;o<q;o++){var n=this[o];var p=g.data(n,k);if(!p){j("cannot call methods on "+k+" prior to initialization; attempted to call '"+s+"'");continue}if(!g.isFunction(p[s])||s.charAt(0)==="_"){j("no such method '"+s+"' for "+k+" instance");continue}var t=p[s].apply(p,m);if(t!==undefined&&t!==p){return t}}return this}else{var r=this.map(function(){var u=g.data(this,k);if(u){u.option(s);u._init()}else{u=new l(this,s);g.data(this,k,u)}return g(this)});if(!r||r.length>1){return r}else{return r[0]}}}}g.bridget=function(k,l){h(l);i(k,l)};return g.bridget}d(c)})(a);(function(c){var e={formatInvalidInputErrorMsg:function(h){return"Invalid input value '"+h+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"};var g={linear:{toValue:function(o){var p=o/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){var m,k,l,j=0;for(var h=0;h<this.options.ticks_positions.length;h++){if(o<=this.options.ticks_positions[h]){m=(h>0)?this.options.ticks[h-1]:0;l=(h>0)?this.options.ticks_positions[h-1]:0;k=this.options.ticks[h];j=this.options.ticks_positions[h];break}}if(h>0){var n=(o-l)/(j-l);p=m+n*(k-m)}}var q=this.options.min+Math.round(p/this.options.step)*this.options.step;if(q<this.options.min){return this.options.min}else{if(q>this.options.max){return this.options.max}else{return q}}},toPercentage:function(o){if(this.options.max===this.options.min){return 0}if(this.options.ticks_positions.length>0){var m,k,l,j=0;for(var h=0;h<this.options.ticks.length;h++){if(o<=this.options.ticks[h]){m=(h>0)?this.options.ticks[h-1]:0;l=(h>0)?this.options.ticks_positions[h-1]:0;k=this.options.ticks[h];j=this.options.ticks_positions[h];break}}if(h>0){var n=(o-m)/(k-m);return l+n*(j-l)}}return 100*(o-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(j){var i=(this.options.min===0)?0:Math.log(this.options.min);var h=Math.log(this.options.max);var k=Math.exp(i+(h-i)*j/100);k=this.options.min+Math.round((k-this.options.min)/this.options.step)*this.options.step;if(k<this.options.min){return this.options.min}else{if(k>this.options.max){return this.options.max}else{return k}}},toPercentage:function(k){if(this.options.max===this.options.min){return 0}else{var h=Math.log(this.options.max);var i=this.options.min===0?0:Math.log(this.options.min);var j=k===0?0:Math.log(k);return 100*(j-i)/(h-i)}}}};b=function(h,i){d.call(this,h,i);return this};function d(k,r){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:false,over:false};if(typeof k==="string"){this.element=document.querySelector(k)}else{if(k instanceof HTMLElement){this.element=k}}r=r?r:{};var s=Object.keys(this.defaultOptions);for(var m=0;m<s.length;m++){var t=s[m];var I=r[t];I=(typeof I!=="undefined")?I:l(this.element,t);I=(I!==null)?I:this.defaultOptions[t];if(!this.options){this.options={}}this.options[t]=I}if(this.options.orientation==="vertical"&&(this.options.tooltip_position==="top"||this.options.tooltip_position==="bottom")){this.options.tooltip_position="right"}else{if(this.options.orientation==="horizontal"&&(this.options.tooltip_position==="left"||this.options.tooltip_position==="right")){this.options.tooltip_position="top"}}function l(K,M){var i="data-slider-"+M.replace(/_/g,"-");var J=K.getAttribute(i);try{return JSON.parse(J)}catch(L){return J}}var u=this.element.style.width;var H=false;var v=this.element.parentNode;var E;var D,C;var x;var w;if(this.sliderElem){H=true}else{this.sliderElem=document.createElement("div");this.sliderElem.className="slider";var B=document.createElement("div");B.className="slider-track";D=document.createElement("div");D.className="slider-track-low";E=document.createElement("div");E.className="slider-selection";C=document.createElement("div");C.className="slider-track-high";x=document.createElement("div");x.className="slider-handle min-slider-handle";x.setAttribute("role","slider");x.setAttribute("aria-valuemin",this.options.min);x.setAttribute("aria-valuemax",this.options.max);w=document.createElement("div");w.className="slider-handle max-slider-handle";w.setAttribute("role","slider");w.setAttribute("aria-valuemin",this.options.min);w.setAttribute("aria-valuemax",this.options.max);B.appendChild(D);B.appendChild(E);B.appendChild(C);var n=Array.isArray(this.options.labelledby);if(n&&this.options.labelledby[0]){x.setAttribute("aria-labelledby",this.options.labelledby[0])}if(n&&this.options.labelledby[1]){w.setAttribute("aria-labelledby",this.options.labelledby[1])}if(!n&&this.options.labelledby){x.setAttribute("aria-labelledby",this.options.labelledby);w.setAttribute("aria-labelledby",this.options.labelledby)}this.ticks=[];if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(m=0;m<this.options.ticks.length;m++){var F=document.createElement("div");F.className="slider-tick";this.ticks.push(F);B.appendChild(F)}E.className+=" tick-slider-selection"}B.appendChild(x);B.appendChild(w);this.tickLabels=[];if(Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0){this.tickLabelContainer=document.createElement("div");this.tickLabelContainer.className="slider-tick-label-container";for(m=0;m<this.options.ticks_labels.length;m++){var p=document.createElement("div");var q=this.options.ticks_positions.length===0;var G=(this.options.reversed&&q)?(this.options.ticks_labels.length-(m+1)):m;p.className="slider-tick-label";p.innerHTML=this.options.ticks_labels[G];this.tickLabels.push(p);this.tickLabelContainer.appendChild(p)}}var j=function(K){var i=document.createElement("div");i.className="tooltip-arrow";var J=document.createElement("div");J.className="tooltip-inner";K.appendChild(i);K.appendChild(J)};var y=document.createElement("div");y.className="tooltip tooltip-main";y.setAttribute("role","presentation");j(y);var A=document.createElement("div");A.className="tooltip tooltip-min";A.setAttribute("role","presentation");j(A);var z=document.createElement("div");z.className="tooltip tooltip-max";z.setAttribute("role","presentation");j(z);this.sliderElem.appendChild(B);this.sliderElem.appendChild(y);this.sliderElem.appendChild(A);this.sliderElem.appendChild(z);if(this.tickLabelContainer){this.sliderElem.appendChild(this.tickLabelContainer)}v.insertBefore(this.sliderElem,this.element);this.element.style.display="none"}if(c){this.$element=c(this.element);this.$sliderElem=c(this.sliderElem)}this.eventToCallbackMap={};this.sliderElem.id=this.options.id;this.touchCapable="ontouchstart" in window||(window.DocumentTouch&&document instanceof window.DocumentTouch);this.tooltip=this.sliderElem.querySelector(".tooltip-main");this.tooltipInner=this.tooltip.querySelector(".tooltip-inner");this.tooltip_min=this.sliderElem.querySelector(".tooltip-min");this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner");this.tooltip_max=this.sliderElem.querySelector(".tooltip-max");this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner");if(g[this.options.scale]){this.options.scale=g[this.options.scale]}if(H===true){this._removeClass(this.sliderElem,"slider-horizontal");this._removeClass(this.sliderElem,"slider-vertical");this._removeClass(this.tooltip,"hide");this._removeClass(this.tooltip_min,"hide");this._removeClass(this.tooltip_max,"hide");["left","top","width","height"].forEach(function(i){this._removeProperty(this.trackLow,i);this._removeProperty(this.trackSelection,i);this._removeProperty(this.trackHigh,i)},this);[this.handle1,this.handle2].forEach(function(i){this._removeProperty(i,"left");this._removeProperty(i,"top")},this);[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(i){this._removeProperty(i,"left");this._removeProperty(i,"top");this._removeProperty(i,"margin-left");this._removeProperty(i,"margin-top");this._removeClass(i,"right");this._removeClass(i,"top")},this)}if(this.options.orientation==="vertical"){this._addClass(this.sliderElem,"slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight"}else{this._addClass(this.sliderElem,"slider-horizontal");this.sliderElem.style.width=u;this.options.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth"}this._setTooltipPosition();if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){this.options.max=Math.max.apply(Math,this.options.ticks);this.options.min=Math.min.apply(Math,this.options.ticks)}if(Array.isArray(this.options.value)){this.options.range=true;this._state.value=this.options.value}else{if(this.options.range){this._state.value=[this.options.value,this.options.max]}else{this._state.value=this.options.value}}this.trackLow=D||this.trackLow;this.trackSelection=E||this.trackSelection;this.trackHigh=C||this.trackHigh;if(this.options.selection==="none"){this._addClass(this.trackLow,"hide");this._addClass(this.trackSelection,"hide");this._addClass(this.trackHigh,"hide")}this.handle1=x||this.handle1;this.handle2=w||this.handle2;if(H===true){this._removeClass(this.handle1,"round triangle");this._removeClass(this.handle2,"round triangle hide");for(m=0;m<this.ticks.length;m++){this._removeClass(this.ticks[m],"round triangle hide")}}var h=["round","triangle","custom"];var o=h.indexOf(this.options.handle)!==-1;if(o){this._addClass(this.handle1,this.options.handle);this._addClass(this.handle2,this.options.handle);for(m=0;m<this.ticks.length;m++){this._addClass(this.ticks[m],this.options.handle)}}this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];this.setValue(this._state.value);this.handle1Keydown=this._keydown.bind(this,0);this.handle1.addEventListener("keydown",this.handle1Keydown,false);this.handle2Keydown=this._keydown.bind(this,1);this.handle2.addEventListener("keydown",this.handle2Keydown,false);this.mousedown=this._mousedown.bind(this);if(this.touchCapable){this.sliderElem.addEventListener("touchstart",this.mousedown,false)}this.sliderElem.addEventListener("mousedown",this.mousedown,false);if(this.options.tooltip==="hide"){this._addClass(this.tooltip,"hide");this._addClass(this.tooltip_min,"hide");this._addClass(this.tooltip_max,"hide")}else{if(this.options.tooltip==="always"){this._showTooltip();this._alwaysShowTooltip=true}else{this.showTooltip=this._showTooltip.bind(this);this.hideTooltip=this._hideTooltip.bind(this);this.sliderElem.addEventListener("mouseenter",this.showTooltip,false);this.sliderElem.addEventListener("mouseleave",this.hideTooltip,false);this.handle1.addEventListener("focus",this.showTooltip,false);this.handle1.addEventListener("blur",this.hideTooltip,false);this.handle2.addEventListener("focus",this.showTooltip,false);this.handle2.addEventListener("blur",this.hideTooltip,false)}}if(this.options.enabled){this.enable()}else{this.disable()}}b.prototype={_init:function(){},constructor:b,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:false,selection:"before",tooltip:"show",tooltip_split:false,handle:"round",reversed:false,enabled:true,formatter:function(h){if(Array.isArray(h)){return h[0]+" : "+h[1]}else{return h}},natural_arrow_keys:false,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:false,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){if(this.options.range){return this._state.value}else{return this._state.value[0]}},setValue:function(m,l,k){if(!m){m=0}var j=this.getValue();this._state.value=this._validateInputValue(m);var h=this._applyPrecision.bind(this);if(this.options.range){this._state.value[0]=h(this._state.value[0]);this._state.value[1]=h(this._state.value[1]);this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0]));this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))}else{this._state.value=h(this._state.value);this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))];this._addClass(this.handle2,"hide");if(this.options.selection==="after"){this._state.value[1]=this.options.max}else{this._state.value[1]=this.options.min}}if(this.options.max>this.options.min){this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),this.options.step*100/(this.options.max-this.options.min)]}else{this._state.percentage=[0,0,100]}this._layout();var i=this.options.range?this._state.value:this._state.value[0];if(l===true){this._trigger("slide",i)}if((j!==i)&&(k===true)){this._trigger("change",{oldValue:j,newValue:i})}this._setDataVal(i);return this},destroy:function(){this._removeSliderEventHandlers();this.sliderElem.parentNode.removeChild(this.sliderElem);this.element.style.display="";this._cleanUpEventCallbacksMap();this.element.removeAttribute("data");if(c){this._unbindJQueryEventHandlers();this.$element.removeData("slider")}},disable:function(){this._state.enabled=false;this.handle1.removeAttribute("tabindex");this.handle2.removeAttribute("tabindex");this._addClass(this.sliderElem,"slider-disabled");this._trigger("slideDisabled");return this},enable:function(){this._state.enabled=true;this.handle1.setAttribute("tabindex",0);this.handle2.setAttribute("tabindex",0);this._removeClass(this.sliderElem,"slider-disabled");this._trigger("slideEnabled");return this},toggle:function(){if(this._state.enabled){this.disable()}else{this.enable()}return this},isEnabled:function(){return this._state.enabled},on:function(i,h){this._bindNonQueryEventHandler(i,h);return this},off:function(i,h){if(c){this.$element.off(i,h);this.$sliderElem.off(i,h)}else{this._unbindNonQueryEventHandler(i,h)}},getAttribute:function(h){if(h){return this.options[h]}else{return this.options}},setAttribute:function(h,i){this.options[h]=i;return this},refresh:function(){this._removeSliderEventHandlers();d.call(this,this.element,this.options);if(c){c.data(this.element,"slider",this)}return this},relayout:function(){this._layout();return this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,false);this.handle2.removeEventListener("keydown",this.handle2Keydown,false);if(this.showTooltip){this.handle1.removeEventListener("focus",this.showTooltip,false);this.handle2.removeEventListener("focus",this.showTooltip,false)}if(this.hideTooltip){this.handle1.removeEventListener("blur",this.hideTooltip,false);this.handle2.removeEventListener("blur",this.hideTooltip,false)}if(this.showTooltip){this.sliderElem.removeEventListener("mouseenter",this.showTooltip,false)}if(this.hideTooltip){this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,false)}this.sliderElem.removeEventListener("touchstart",this.mousedown,false);this.sliderElem.removeEventListener("mousedown",this.mousedown,false)},_bindNonQueryEventHandler:function(i,h){if(this.eventToCallbackMap[i]===undefined){this.eventToCallbackMap[i]=[]}this.eventToCallbackMap[i].push(h)},_unbindNonQueryEventHandler:function(k,h){var j=this.eventToCallbackMap[k];if(j!==undefined){for(var l=0;l<j.length;l++){if(j[l]===h){j.splice(l,1);break}}}},_cleanUpEventCallbacksMap:function(){var j=Object.keys(this.eventToCallbackMap);for(var k=0;k<j.length;k++){var h=j[k];this.eventToCallbackMap[h]=null}},_showTooltip:function(){if(this.options.tooltip_split===false){this._addClass(this.tooltip,"in");this.tooltip_min.style.display="none";this.tooltip_max.style.display="none"}else{this._addClass(this.tooltip_min,"in");this._addClass(this.tooltip_max,"in");this.tooltip.style.display="none"}this._state.over=true},_hideTooltip:function(){if(this._state.inDrag===false&&this.alwaysShowTooltip!==true){this._removeClass(this.tooltip,"in");this._removeClass(this.tooltip_min,"in");this._removeClass(this.tooltip_max,"in")}this._state.over=false},_layout:function(){var r;if(this.options.reversed){r=[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]}else{r=[this._state.percentage[0],this._state.percentage[1]]}this.handle1.style[this.stylePos]=r[0]+"%";this.handle1.setAttribute("aria-valuenow",this._state.value[0]);this.handle2.style[this.stylePos]=r[1]+"%";this.handle2.setAttribute("aria-valuenow",this._state.value[1]);if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var t=this.options.orientation==="vertical"?"height":"width";var s=this.options.orientation==="vertical"?"marginTop":"marginLeft";var n=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var h=0;if(this.options.ticks_positions.length===0){if(this.options.orientation!=="vertical"){this.tickLabelContainer.style[s]=-n/2+"px"}h=this.tickLabelContainer.offsetHeight}else{for(k=0;k<this.tickLabelContainer.childNodes.length;k++){if(this.tickLabelContainer.childNodes[k].offsetHeight>h){h=this.tickLabelContainer.childNodes[k].offsetHeight}}}if(this.options.orientation==="horizontal"){this.sliderElem.style.marginBottom=h+"px"}}for(var k=0;k<this.options.ticks.length;k++){var q=this.options.ticks_positions[k]||this._toPercentage(this.options.ticks[k]);if(this.options.reversed){q=100-q}this.ticks[k].style[this.stylePos]=q+"%";this._removeClass(this.ticks[k],"in-selection");if(!this.options.range){if(this.options.selection==="after"&&q>=r[0]){this._addClass(this.ticks[k],"in-selection")}else{if(this.options.selection==="before"&&q<=r[0]){this._addClass(this.ticks[k],"in-selection")}}}else{if(q>=r[0]&&q<=r[1]){this._addClass(this.ticks[k],"in-selection")}}if(this.tickLabels[k]){this.tickLabels[k].style[t]=n+"px";if(this.options.orientation!=="vertical"&&this.options.ticks_positions[k]!==undefined){this.tickLabels[k].style.position="absolute";this.tickLabels[k].style[this.stylePos]=q+"%";this.tickLabels[k].style[s]=-n/2+"px"}else{if(this.options.orientation==="vertical"){this.tickLabels[k].style.marginLeft=this.sliderElem.offsetWidth+"px";this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"}}}}}var j;if(this.options.range){j=this.options.formatter(this._state.value);this._setText(this.tooltipInner,j);this.tooltip.style[this.stylePos]=(r[1]+r[0])/2+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}var m=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,m);var l=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,l);this.tooltip_min.style[this.stylePos]=r[0]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px")}else{this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px")}this.tooltip_max.style[this.stylePos]=r[1]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px")}else{this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}}else{j=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner,j);this.tooltip.style[this.stylePos]=r[0]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}}if(this.options.orientation==="vertical"){this.trackLow.style.top="0";this.trackLow.style.height=Math.min(r[0],r[1])+"%";this.trackSelection.style.top=Math.min(r[0],r[1])+"%";this.trackSelection.style.height=Math.abs(r[0]-r[1])+"%";this.trackHigh.style.bottom="0";this.trackHigh.style.height=(100-Math.min(r[0],r[1])-Math.abs(r[0]-r[1]))+"%"}else{this.trackLow.style.left="0";this.trackLow.style.width=Math.min(r[0],r[1])+"%";this.trackSelection.style.left=Math.min(r[0],r[1])+"%";this.trackSelection.style.width=Math.abs(r[0]-r[1])+"%";this.trackHigh.style.right="0";this.trackHigh.style.width=(100-Math.min(r[0],r[1])-Math.abs(r[0]-r[1]))+"%";var p=this.tooltip_min.getBoundingClientRect();var o=this.tooltip_max.getBoundingClientRect();if(p.right>o.left){this._removeClass(this.tooltip_max,"top");this._addClass(this.tooltip_max,"bottom");this.tooltip_max.style.top=18+"px"}else{this._removeClass(this.tooltip_max,"bottom");this._addClass(this.tooltip_max,"top");this.tooltip_max.style.top=this.tooltip_min.style.top}}},_removeProperty:function(h,i){if(h.style.removeProperty){h.style.removeProperty(i)}else{h.style.removeAttribute(i)}},_mousedown:function(j){if(!this._state.enabled){return false}this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];var l=this._getPercentage(j);if(this.options.range){var h=Math.abs(this._state.percentage[0]-l);var i=Math.abs(this._state.percentage[1]-l);this._state.dragged=(h<i)?0:1}else{this._state.dragged=0}this._state.percentage[this._state.dragged]=l;this._layout();if(this.touchCapable){document.removeEventListener("touchmove",this.mousemove,false);document.removeEventListener("touchend",this.mouseup,false)}if(this.mousemove){document.removeEventListener("mousemove",this.mousemove,false)}if(this.mouseup){document.removeEventListener("mouseup",this.mouseup,false)}this.mousemove=this._mousemove.bind(this);this.mouseup=this._mouseup.bind(this);if(this.touchCapable){document.addEventListener("touchmove",this.mousemove,false);document.addEventListener("touchend",this.mouseup,false)}document.addEventListener("mousemove",this.mousemove,false);document.addEventListener("mouseup",this.mouseup,false);this._state.inDrag=true;var k=this._calculateValue();this._trigger("slideStart",k);this._setDataVal(k);this.setValue(k,false,true);this._pauseEvent(j);if(this.options.focus){this._triggerFocusOnHandle(this._state.dragged)}return true},_triggerFocusOnHandle:function(h){if(h===0){this.handle1.focus()}if(h===1){this.handle2.focus()}},_keydown:function(j,i){if(!this._state.enabled){return false}var h;switch(i.keyCode){case 37:case 40:h=-1;break;case 39:case 38:h=1;break}if(!h){return}if(this.options.natural_arrow_keys){var l=(this.options.orientation==="vertical"&&!this.options.reversed);var k=(this.options.orientation==="horizontal"&&this.options.reversed);if(l||k){h=-h}}var m=this._state.value[j]+h*this.options.step;if(this.options.range){m=[(!j)?m:this._state.value[0],(j)?m:this._state.value[1]]}this._trigger("slideStart",m);this._setDataVal(m);this.setValue(m,true,true);this._setDataVal(m);this._trigger("slideStop",m);this._layout();this._pauseEvent(i);return false},_pauseEvent:function(h){if(h.stopPropagation){h.stopPropagation()}if(h.preventDefault){h.preventDefault()}h.cancelBubble=true;h.returnValue=false},_mousemove:function(h){if(!this._state.enabled){return false}var i=this._getPercentage(h);this._adjustPercentageForRangeSliders(i);this._state.percentage[this._state.dragged]=i;this._layout();var j=this._calculateValue(true);this.setValue(j,true,true);return false},_adjustPercentageForRangeSliders:function(h){if(this.options.range){var j=this._getNumDigitsAfterDecimalPlace(h);j=j?j-1:0;var i=this._applyToFixedAndParseFloat(h,j);if(this._state.dragged===0&&this._applyToFixedAndParseFloat(this._state.percentage[1],j)<i){this._state.percentage[0]=this._state.percentage[1];this._state.dragged=1}else{if(this._state.dragged===1&&this._applyToFixedAndParseFloat(this._state.percentage[0],j)>i){this._state.percentage[1]=this._state.percentage[0];this._state.dragged=0}}}},_mouseup:function(){if(!this._state.enabled){return false}if(this.touchCapable){document.removeEventListener("touchmove",this.mousemove,false);document.removeEventListener("touchend",this.mouseup,false)}document.removeEventListener("mousemove",this.mousemove,false);document.removeEventListener("mouseup",this.mouseup,false);this._state.inDrag=false;if(this._state.over===false){this._hideTooltip()}var h=this._calculateValue(true);this._layout();this._setDataVal(h);this._trigger("slideStop",h);return false},_calculateValue:function(l){var m;if(this.options.range){m=[this.options.min,this.options.max];if(this._state.percentage[0]!==0){m[0]=this._toValue(this._state.percentage[0]);m[0]=this._applyPrecision(m[0])}if(this._state.percentage[1]!==100){m[1]=this._toValue(this._state.percentage[1]);m[1]=this._applyPrecision(m[1])}}else{m=this._toValue(this._state.percentage[0]);m=parseFloat(m);m=this._applyPrecision(m)}if(l){var k=[m,Infinity];for(var j=0;j<this.options.ticks.length;j++){var h=Math.abs(this.options.ticks[j]-m);if(h<=k[1]){k=[this.options.ticks[j],h]}}if(k[1]<=this.options.ticks_snap_bounds){return k[0]}}return m},_applyPrecision:function(i){var h=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(i,h)},_getNumDigitsAfterDecimalPlace:function(i){var h=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!h){return 0}return Math.max(0,(h[1]?h[1].length:0)-(h[2]?+h[2]:0))},_applyToFixedAndParseFloat:function(h,i){var j=h.toFixed(i);return parseFloat(j)},_getPercentage:function(i){if(this.touchCapable&&(i.type==="touchstart"||i.type==="touchmove")){i=i.touches[0]}var j=i[this.mousePos];var l=this._state.offset[this.stylePos];var h=j-l;var k=(h/this._state.size)*100;k=Math.round(k/this._state.percentage[2])*this._state.percentage[2];if(this.options.reversed){k=100-k}return Math.max(0,Math.min(100,k))},_validateInputValue:function(h){if(typeof h==="number"){return h}else{if(Array.isArray(h)){this._validateArray(h);return h}else{throw new Error(e.formatInvalidInputErrorMsg(h))}}},_validateArray:function(k){for(var h=0;h<k.length;h++){var j=k[h];if(typeof j!=="number"){throw new Error(e.formatInvalidInputErrorMsg(j))}}},_setDataVal:function(h){this.element.setAttribute("data-value",h);this.element.setAttribute("value",h);this.element.value=h},_trigger:function(k,m){m=(m||m===0)?m:undefined;var j=this.eventToCallbackMap[k];if(j&&j.length){for(var l=0;l<j.length;l++){var h=j[l];h(m)}}if(c){this._triggerJQueryEvent(k,m)}},_triggerJQueryEvent:function(i,j){var h={type:i,value:j};this.$element.trigger(h);this.$sliderElem.trigger(h)},_unbindJQueryEventHandlers:function(){this.$element.off();this.$sliderElem.off()},_setText:function(h,i){if(typeof h.innerText!=="undefined"){h.innerText=i}else{if(typeof h.textContent!=="undefined"){h.textContent=i}}},_removeClass:function(l,j){var h=j.split(" ");var n=l.className;for(var m=0;m<h.length;m++){var k=h[m];var o=new RegExp("(?:\\s|^)"+k+"(?:\\s|$)");n=n.replace(o," ")}l.className=n.trim()},_addClass:function(l,j){var h=j.split(" ");var o=l.className;for(var m=0;m<h.length;m++){var k=h[m];var p=new RegExp("(?:\\s|^)"+k+"(?:\\s|$)");var n=p.test(o);if(!n){o+=" "+k}}l.className=o.trim()},_offsetLeft:function(h){return h.getBoundingClientRect().left},_offsetTop:function(h){var i=h.offsetTop;while((h=h.offsetParent)&&!isNaN(h.offsetTop)){i+=h.offsetTop}return i},_offset:function(h){return{left:this._offsetLeft(h),top:this._offsetTop(h)}},_css:function(h,j,k){if(c){c.style(h,j,k)}else{var i=j.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(l,m){return m.toUpperCase()});h.style[i]=k}},_toValue:function(h){return this.options.scale.toValue.apply(this,[h])},_toPercentage:function(h){return this.options.scale.toPercentage.apply(this,[h])},_setTooltipPosition:function(){var j=[this.tooltip,this.tooltip_min,this.tooltip_max];if(this.options.orientation==="vertical"){var i=this.options.tooltip_position||"right";var h=(i==="left")?"right":"left";j.forEach(function(k){this._addClass(k,i);k.style[h]="100%"}.bind(this))}else{if(this.options.tooltip_position==="bottom"){j.forEach(function(k){this._addClass(k,"bottom");k.style.top=22+"px"}.bind(this))}else{j.forEach(function(k){this._addClass(k,"top");k.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}}}};if(c){var f=c.fn.slider?"bootstrapSlider":"slider";c.bridget(f,b)}})(a);return b}));