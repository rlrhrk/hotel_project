(function(a){var b=[];var c={options:{prependExistingHelpBlock:false,sniffHtml:true,preventSubmit:true,submitError:false,submitSuccess:false,semanticallyStrict:false,bindEvents:[],autoAdd:{helpBlocks:true},filter:function(){return true}},methods:{init:function(i){var j=a.extend(true,{},c);j.options=a.extend(true,j.options,i);var h=this;var k=a.unique(h.map(function(){return a(this).parents("form")[0]}).toArray());a(k).on("submit.validationSubmit",function(p){var n=a(this);var q=0;var m=n.find("input,textarea,select").not("[type=submit],[type=image]").filter(j.options.filter);var l=n.find(".form-group");var o=m.filter(function(){return a(this).triggerHandler("getValidatorCount.validation")>0});o.trigger("submit.validation");m.trigger("validationLostFocus.validation");l.each(function(t,s){var r=a(s);if(r.hasClass("issue")||r.hasClass("error")){r.removeClass("issue").addClass("error");q++}});if(q){if(j.options.preventSubmit){p.preventDefault();p.stopImmediatePropagation()}n.addClass("error");if(a.isFunction(j.options.submitError)){j.options.submitError(n,p,o.jqBootstrapValidation("collectErrors",true))}}else{n.removeClass("error");if(a.isFunction(j.options.submitSuccess)){j.options.submitSuccess(n,p)}}});return this.each(function(){var o=a(this),l=o.parents(".form-group").first(),n=l.find(".help-block").first(),m=o.parents("form").first(),y=[];if(!n.length&&j.options.autoAdd&&j.options.autoAdd.helpBlocks){n=a('<div class="help-block" />');l.find(".controls").append(n);b.push(n[0])}if(j.options.sniffHtml){var s;if(o.data("validationPatternPattern")){o.attr("pattern",o.data("validationPatternPattern"))}if(o.attr("pattern")!==undefined){s="Not in the expected format<!-- data-validation-pattern-message to override -->";if(o.data("validationPatternMessage")){s=o.data("validationPatternMessage")}o.data("validationPatternMessage",s);o.data("validationPatternRegex",o.attr("pattern"))}if(o.attr("max")!==undefined||o.attr("aria-valuemax")!==undefined){var r=(o.attr("max")!==undefined?o.attr("max"):o.attr("aria-valuemax"));s="Too high: Maximum of '"+r+"'<!-- data-validation-max-message to override -->";if(o.data("validationMaxMessage")){s=o.data("validationMaxMessage")}o.data("validationMaxMessage",s);o.data("validationMaxMax",r)}if(o.attr("min")!==undefined||o.attr("aria-valuemin")!==undefined){var t=(o.attr("min")!==undefined?o.attr("min"):o.attr("aria-valuemin"));s="Too low: Minimum of '"+t+"'<!-- data-validation-min-message to override -->";if(o.data("validationMinMessage")){s=o.data("validationMinMessage")}o.data("validationMinMessage",s);o.data("validationMinMin",t)}if(o.attr("maxlength")!==undefined){s="Too long: Maximum of '"+o.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->";if(o.data("validationMaxlengthMessage")){s=o.data("validationMaxlengthMessage")}o.data("validationMaxlengthMessage",s);o.data("validationMaxlengthMaxlength",o.attr("maxlength"))}if(o.attr("minlength")!==undefined){s="Too short: Minimum of '"+o.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->";if(o.data("validationMinlengthMessage")){s=o.data("validationMinlengthMessage")}o.data("validationMinlengthMessage",s);o.data("validationMinlengthMinlength",o.attr("minlength"))}if(o.attr("required")!==undefined||o.attr("aria-required")!==undefined){s=j.builtInValidators.required.message;if(o.data("validationRequiredMessage")){s=o.data("validationRequiredMessage")}o.data("validationRequiredMessage",s)}if(o.attr("type")!==undefined&&o.attr("type").toLowerCase()==="number"){s=j.validatorTypes.number.message;if(o.data("validationNumberMessage")){s=o.data("validationNumberMessage")}o.data("validationNumberMessage",s);var w=j.validatorTypes.number.step;if(o.data("validationNumberStep")){w=o.data("validationNumberStep")}o.data("validationNumberStep",w);var p=j.validatorTypes.number.decimal;if(o.data("validationNumberDecimal")){p=o.data("validationNumberDecimal")}o.data("validationNumberDecimal",p)}if(o.attr("type")!==undefined&&o.attr("type").toLowerCase()==="email"){s="Not a valid email address<!-- data-validation-email-message to override -->";if(o.data("validationEmailMessage")){s=o.data("validationEmailMessage")}o.data("validationEmailMessage",s)}if(o.attr("minchecked")!==undefined){s="Not enough options checked; Minimum of '"+o.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->";if(o.data("validationMincheckedMessage")){s=o.data("validationMincheckedMessage")}o.data("validationMincheckedMessage",s);o.data("validationMincheckedMinchecked",o.attr("minchecked"))}if(o.attr("maxchecked")!==undefined){s="Too many options checked; Maximum of '"+o.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->";if(o.data("validationMaxcheckedMessage")){s=o.data("validationMaxcheckedMessage")}o.data("validationMaxcheckedMessage",s);o.data("validationMaxcheckedMaxchecked",o.attr("maxchecked"))}}if(o.data("validation")!==undefined){y=o.data("validation").split(",")}a.each(o.data(),function(C,B){var D=C.replace(/([A-Z])/g,",$1").split(",");if(D[0]==="validation"&&D[1]){y.push(D[1])}});var z=y;var u=[];var x=function(C,B){y[C]=e(B)};var q=function(C,B){if(o.data("validation"+B+"Shortcut")!==undefined){a.each(o.data("validation"+B+"Shortcut").split(","),function(F,E){u.push(E)})}else{if(j.builtInValidators[B.toLowerCase()]){var D=j.builtInValidators[B.toLowerCase()];if(D.type.toLowerCase()==="shortcut"){a.each(D.shortcut.split(","),function(F,E){E=e(E);u.push(E);y.push(E)})}}}};do{a.each(y,x);y=a.unique(y);u=[];a.each(z,q);z=u}while(z.length>0);var A={};a.each(y,function(E,B){var F=o.data("validation"+B+"Message");var D=!!F;var C=false;if(!F){F="'"+B+"' validation failed <!-- Add attribute 'data-validation-"+B.toLowerCase()+"-message' to input to change this message -->"}a.each(j.validatorTypes,function(K,J){if(A[K]===undefined){A[K]=[]}if(!C&&o.data("validation"+B+e(J.name))!==undefined){var I=J.init(o,B);if(D){I.message=F}A[K].push(a.extend(true,{name:e(J.name),message:F},I));C=true}});if(!C&&j.builtInValidators[B.toLowerCase()]){var G=a.extend(true,{},j.builtInValidators[B.toLowerCase()]);if(D){G.message=F}var H=G.type.toLowerCase();if(H==="shortcut"){C=true}else{a.each(j.validatorTypes,function(J,I){if(A[J]===undefined){A[J]=[]}if(!C&&H===J.toLowerCase()){o.data("validation"+B+e(I.name),G[I.name.toLowerCase()]);A[H].push(a.extend(G,I.init(o,B)));C=true}})}}if(!C){a.error("Cannot find validation info for '"+B+"'")}});n.data("original-contents",(n.data("original-contents")?n.data("original-contents"):n.html()));n.data("original-role",(n.data("original-role")?n.data("original-role"):n.attr("role")));l.data("original-classes",(l.data("original-clases")?l.data("original-classes"):l.attr("class")));o.data("original-aria-invalid",(o.data("original-aria-invalid")?o.data("original-aria-invalid"):o.attr("aria-invalid")));o.on("validation.validation",function(C,D){var E=f(o);var B=[];a.each(A,function(F,G){if(E||E.length||((D&&D.includeEmpty)||!!j.validatorTypes[F].includeEmpty)||(!!j.validatorTypes[F].blockSubmit&&D&&!!D.submitting)){a.each(G,function(H,I){if(j.validatorTypes[F].validate(o,E,I)){B.push(I.message)}})}});return B});o.on("getValidators.validation",function(){return A});var v=0;a.each(A,function(C,B){v+=B.length});o.on("getValidatorCount.validation",function(){return v});o.on("submit.validation",function(){return o.triggerHandler("change.validation",{submitting:true})});o.on((j.options.bindEvents.length>0?j.options.bindEvents:["keyup","focus","blur","click","keydown","keypress","change"]).concat(["revalidate"]).join(".validation ")+".validation",function(B,E){var F=f(o);var C=[];if(E&&!!E.submitting){l.data("jqbvIsSubmitting",true)}else{if(B.type!=="revalidate"){l.data("jqbvIsSubmitting",false)}}var D=!!l.data("jqbvIsSubmitting");l.find("input,textarea,select").not("[type=submit]").each(function(H,G){var I=C.length;a.each(a(G).triggerHandler("validation.validation",E)||[],function(K,L){C.push(L)});if(C.length>I){a(G).attr("aria-invalid","true")}else{var J=o.data("original-aria-invalid");a(G).attr("aria-invalid",(J!==undefined?J:false))}});m.find("input,select,textarea").not(o).not('[name="'+o.attr("name")+'"]').trigger("validationLostFocus.validation");C=a.unique(C.sort());if(C.length){l.removeClass("validate error issue").addClass(D?"error":"issue");if(j.options.semanticallyStrict&&C.length===1){n.html(C[0]+(j.options.prependExistingHelpBlock?n.data("original-contents"):""))}else{n.html('<ul role="alert"><li>'+C.join("</li><li>")+"</li></ul>"+(j.options.prependExistingHelpBlock?n.data("original-contents"):""))}}else{l.removeClass("issue error validate");if(F.length>0){l.addClass("validate")}n.html(n.data("original-contents"))}if(B.type==="blur"){if(j.options.removeSuccess){}}});o.on("validationLostFocus.validation",function(){if(j.options.removeSuccess){}})})},destroy:function(){return this.each(function(){var k=a(this),h=k.parents(".form-group").first(),j=h.find(".help-block").first(),i=k.parents("form").first();k.unbind(".validation");i.unbind(".validationSubmit");j.html(j.data("original-contents"));h.attr("class",h.data("original-classes"));k.attr("aria-invalid",k.data("original-aria-invalid"));j.attr("role",k.data("original-role"));if(a.inArray(j[0],b)>-1){j.remove()}})},collectErrors:function(i){var h={};this.each(function(m,k){var j=a(k);var n=j.attr("name");var l=j.triggerHandler("validation.validation",{includeEmpty:true});h[n]=a.extend(true,l,h[n])});a.each(h,function(k,j){if(j.length===0){delete h[k]}});return h},hasErrors:function(){var h=[];this.find("input,select,textarea").add(this).each(function(k,j){h=h.concat(a(j).triggerHandler("getValidators.validation")?a(j).triggerHandler("validation.validation",{submitting:true}):[])});return(h.length>0)},override:function(h){c=a.extend(true,c,h)}},validatorTypes:{callback:{name:"callback",init:function(h,j){var k={validatorName:j,callback:h.data("validation"+j+"Callback"),lastValue:h.val(),lastValid:true,lastFinished:true};var i="Not valid";if(h.data("validation"+j+"Message")){i=h.data("validation"+j+"Message")}k.message=i;return k},validate:function(h,l,k){if(k.lastValue===l&&k.lastFinished){return !k.lastValid}if(k.lastFinished===true){k.lastValue=l;k.lastValid=true;k.lastFinished=false;var j=k;var i=h;d(k.callback,window,h,l,function(m){if(j.lastValue===m.value){j.lastValid=m.valid;if(m.message){j.message=m.message}j.lastFinished=true;i.data("validation"+j.validatorName+"Message",j.message);setTimeout(function(){if(!h.is(":focus")&&h.parents("form").first().data("jqbvIsSubmitting")){i.trigger("blur.validation")}else{i.trigger("revalidate.validation")}},1)}})}return false}},ajax:{name:"ajax",init:function(h,i){return{validatorName:i,url:h.data("validation"+i+"Ajax"),lastValue:h.val(),lastValid:true,lastFinished:true}},validate:function(h,j,i){if(""+i.lastValue===""+j&&i.lastFinished===true){return i.lastValid===false}if(i.lastFinished===true){i.lastValue=j;i.lastValid=true;i.lastFinished=false;a.ajax({url:i.url,data:"value="+encodeURIComponent(j)+"&field="+h.attr("name"),dataType:"json",success:function(k){if(""+i.lastValue===""+k.value){i.lastValid=!!(k.valid);if(k.message){i.message=k.message}i.lastFinished=true;h.data("validation"+i.validatorName+"Message",i.message);setTimeout(function(){h.trigger("revalidate.validation")},1)}},failure:function(){i.lastValid=true;i.message="ajax call failed";i.lastFinished=true;h.data("validation"+i.validatorName+"Message",i.message);setTimeout(function(){h.trigger("revalidate.validation")},1)}})}return false}},regex:{name:"regex",init:function(h,j){var l={};var k=h.data("validation"+j+"Regex");l.regex=g(k);if(k===undefined){a.error("Can't find regex for '"+j+"' validator on '"+h.attr("name")+"'")}var i="Not in the expected format";if(h.data("validation"+j+"Message")){i=h.data("validation"+j+"Message")}l.message=i;l.originalName=j;return l},validate:function(h,j,i){return(!i.regex.test(j)&&!i.negative)||(i.regex.test(j)&&i.negative)}},email:{name:"email",init:function(h,j){var k={};k.regex=g("[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}");var i="Not a valid email address";if(h.data("validation"+j+"Message")){i=h.data("validation"+j+"Message")}k.message=i;k.originalName=j;return k},validate:function(h,j,i){return(!i.regex.test(j)&&!i.negative)||(i.regex.test(j)&&i.negative)}},required:{name:"required",init:function(h,j){var i="This is required";if(h.data("validation"+j+"Message")){i=h.data("validation"+j+"Message")}return{message:i,includeEmpty:true}},validate:function(h,j,i){return !!((j.length===0&&!i.negative)||(j.length>0&&i.negative))},blockSubmit:true},match:{name:"match",init:function(k,n){var l=k.data("validation"+n+"Match");var i=k.parents("form").first();var h=i.find('[name="'+l+'"]').first();h.on("validation.validation",function(){k.trigger("revalidate.validation",{submitting:true})});var o={};o.element=h;if(h.length===0){a.error("Can't find field '"+l+"' to match '"+k.attr("name")+"' against in '"+n+"' validator")}var m="Must match";var j=null;if((j=i.find('label[for="'+l+'"]')).length){m+=" '"+j.text()+"'"}else{if((j=h.parents(".form-group").first().find("label")).length){m+=" '"+j.first().text()+"'"}}if(k.data("validation"+n+"Message")){m=k.data("validation"+n+"Message")}o.message=m;return o},validate:function(h,j,i){return(j!==i.element.val()&&!i.negative)||(j===i.element.val()&&i.negative)},blockSubmit:true,includeEmpty:true},max:{name:"max",init:function(h,i){var j={};j.max=h.data("validation"+i+"Max");j.message="Too high: Maximum of '"+j.max+"'";if(h.data("validation"+i+"Message")){j.message=h.data("validation"+i+"Message")}return j},validate:function(h,j,i){return(parseFloat(j,10)>parseFloat(i.max,10)&&!i.negative)||(parseFloat(j,10)<=parseFloat(i.max,10)&&i.negative)}},min:{name:"min",init:function(h,i){var j={};j.min=h.data("validation"+i+"Min");j.message="Too low: Minimum of '"+j.min+"'";if(h.data("validation"+i+"Message")){j.message=h.data("validation"+i+"Message")}return j},validate:function(h,j,i){return(parseFloat(j)<parseFloat(i.min)&&!i.negative)||(parseFloat(j)>=parseFloat(i.min)&&i.negative)}},maxlength:{name:"maxlength",init:function(h,i){var j={};j.maxlength=h.data("validation"+i+"Maxlength");j.message="Too long: Maximum of '"+j.maxlength+"' characters";if(h.data("validation"+i+"Message")){j.message=h.data("validation"+i+"Message")}return j},validate:function(h,j,i){return((j.length>i.maxlength)&&!i.negative)||((j.length<=i.maxlength)&&i.negative)}},minlength:{name:"minlength",init:function(h,i){var j={};j.minlength=h.data("validation"+i+"Minlength");j.message="Too short: Minimum of '"+j.minlength+"' characters";if(h.data("validation"+i+"Message")){j.message=h.data("validation"+i+"Message")}return j},validate:function(h,j,i){return((j.length<i.minlength)&&!i.negative)||((j.length>=i.minlength)&&i.negative)}},maxchecked:{name:"maxchecked",init:function(h,k){var l={};var i=h.parents("form").first().find('[name="'+h.attr("name")+'"]');i.on("change.validation click.validation",function(){h.trigger("revalidate.validation",{includeEmpty:true})});l.elements=i;l.maxchecked=h.data("validation"+k+"Maxchecked");var j="Too many: Max '"+l.maxchecked+"' checked";if(h.data("validation"+k+"Message")){j=h.data("validation"+k+"Message")}l.message=j;return l},validate:function(h,j,i){return(i.elements.filter(":checked").length>i.maxchecked&&!i.negative)||(i.elements.filter(":checked").length<=i.maxchecked&&i.negative)},blockSubmit:true},minchecked:{name:"minchecked",init:function(h,k){var l={};var i=h.parents("form").first().find('[name="'+h.attr("name")+'"]');i.on("change.validation click.validation",function(){h.trigger("revalidate.validation",{includeEmpty:true})});l.elements=i;l.minchecked=h.data("validation"+k+"Minchecked");var j="Too few: Min '"+l.minchecked+"' checked";if(h.data("validation"+k+"Message")){j=h.data("validation"+k+"Message")}l.message=j;return l},validate:function(h,j,i){return(i.elements.filter(":checked").length<i.minchecked&&!i.negative)||(i.elements.filter(":checked").length>=i.minchecked&&i.negative)},blockSubmit:true,includeEmpty:true},number:{name:"number",init:function(h,j){var k={};k.step=1;if(h.attr("step")){k.step=h.attr("step")}if(h.data("validation"+j+"Step")){k.step=h.data("validation"+j+"Step")}k.decimal=".";if(h.data("validation"+j+"Decimal")){k.decimal=h.data("validation"+j+"Decimal")}k.thousands="";if(h.data("validation"+j+"Thousands")){k.thousands=h.data("validation"+j+"Thousands")}k.regex=g("([+-]?\\d+(\\"+k.decimal+"\\d+)?)?");k.message="Must be a number";var i=h.data("validation"+j+"Message");if(i){k.message=i}return k},validate:function(h,q,p){var i=q.replace(p.decimal,".").replace(p.thousands,"");var k=parseFloat(i);var j=parseFloat(p.step);while(j%1!==0){j=parseFloat(j.toPrecision(12))*10;k=parseFloat(k.toPrecision(12))*10}var l=p.regex.test(q);var n=parseFloat(k)%parseFloat(j)===0;var o=!isNaN(parseFloat(i))&&isFinite(i);var m=!(l&&n&&o);return m},message:"Must be a number",}},builtInValidators:{email:{name:"Email",type:"email"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"},number:{name:"Number",type:"number",decimal:".",step:"1"},pattern:{name:"Pattern",type:"regex",message:"Not in expected format"}}};var e=function(h){return h.toLowerCase().replace(/(^|\s)([a-z])/g,function(i,j,k){return j+k.toUpperCase()})};var f=function(h){var l=null;var k=h.attr("type");if(k==="checkbox"){l=(h.is(":checked")?l:"");var i=h.parents("form").first()||h.parents(".form-group").first();if(i){l=i.find("input[name='"+h.attr("name")+"']:checked").map(function(n,m){return a(m).val()}).toArray().join(",")}}else{if(k==="radio"){l=(a('input[name="'+h.attr("name")+'"]:checked').length>0?h.val():"");var j=h.parents("form").first()||h.parents(".form-group").first();if(j){l=j.find("input[name='"+h.attr("name")+"']:checked").map(function(n,m){return a(m).val()}).toArray().join(",")}}else{if(k==="number"){if(h[0].validity.valid){l=h.val()}else{if(h[0].validity.badInput||h[0].validity.stepMismatch){l="NaN"}else{l=""}}}else{l=h.val()}}}return l};function g(h){return new RegExp("^"+h+"$")}function d(l,j){var h=Array.prototype.slice.call(arguments,2);var n=l.split(".");var k=n.pop();for(var m=0;m<n.length;m++){j=j[n[m]]}return j[k].apply(j,h)}a.fn.jqBootstrapValidation=function(h){if(c.methods[h]){return c.methods[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return c.methods.init.apply(this,arguments)}else{a.error("Method "+h+" does not exist on jQuery.jqBootstrapValidation");return null}}};a.jqBootstrapValidation=function(h){a(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}})(jQuery);